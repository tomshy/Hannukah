

<!DOCTYPE html>
<html>

<!-- Mirrored from timmyomahony.com/blog/twitter-controlled-power-switches-raspberry-pis/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2020 07:54:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <meta name='description' content="">
  <meta name='keywords' content=''>  
  <title>Twitter controlled power switches with a Raspberry Pis</title>
  
  

<link rel="apple-touch-icon" sizes="180x180" href="../../static/images/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../static/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../static/images/favicon/favicon-16x16.png">
<link rel="manifest" href="../../static/images/favicon/site.webmanifest">
<link rel="mask-icon" href="../../static/images/favicon/safari-pinned-tab.svg" color="#67d38a">
<meta name="msapplication-TileColor" content="#67d38a">
<meta name="theme-color" content="#67d38a">
  
  <link rel="stylesheet" href="../../static/css/styles.min.css" type="text/css" charset="utf-8">
  
</head>
<body class='' data-component='body'>
  <div class='page'>
    





<div class='header-wrapper ' data-component='header'>
  <div class='container'>
    <div class='row'>
      <div class='col-xs-12'>
        <header class='header'>
          <div class='header-logo'>
            <a class='header-image' href='../../index.html'>
              <img class='header-image__img' src="../../static/images/timmy-omahony-portrait-small.png" alt="Timmy O&#39;Mahony">
            </a>
            <div class="header-text">
              <a class='header-title link--dark link--no-underline' href='../../index.html'>
                Timmy O&#39;Mahony
              </a>
              <p class='header-subtitle color-xs-light-gray'>
                Software Development
              </p>
            </div>
          </div>
          <nav class='header-nav'>
            <ul class='header-nav__list'>
              <li class='header-nav__item'>
                <a class='header-nav__link ' href='../../index.html'>
                  About
                </a>
              </li>
              <li class='header-nav__item'>
                <a class='header-nav__link header-nav__link--active' href='../index.html'>
                  Blog
                </a>
              </li>
              <li class='header-nav__item hide-xs show-sm'>
                <a class='header-nav__link header-nav__link--light' href='mailto:hey@timmyomahony.com'>
                  hey@timmyomahony.com
                </a>
              </li>
            </ul>
          </nav>
          <button class='header-hamburger button--reset clickable' data-header-hamburger>
            <svg class="svg svg--hamburger" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
              viewBox="0 0 298 87.011" enable-background="new 0 0 298 87.011" xml:space="preserve">
              <rect x="0" fill="#282828" width="298" height="21.505"/>
              <rect y="65.506" fill="#282828" width="298" height="21.505"/>
            </svg>
          </button>
        </header>
      </div>
    </div>
  </div>
  <div class='header-overlay' data-nav-overlay>
    <div class='header-overlay__close' data-header-overlay-close>
      <button class='button button--reset'>
        <svg class='clickable' version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 327.688 327.681" enable-background="new 0 0 327.688 327.681"
           xml:space="preserve">
        <path fill="#231F20" d="M3.004,324.691c1.997,1.997,4.618,2.99,7.24,2.99s5.243-1.004,7.25-3.001l146.35-146.523l146.35,146.523
          c1.997,2.008,4.618,3.001,7.25,3.001c2.621,0,5.243-1.004,7.239-2.99c4.004-3.993,4.004-10.476,0.011-14.479l-146.207-146.37
          L324.684,17.48c3.994-4.003,3.994-10.485-0.01-14.479c-4.015-4.004-10.486-4.004-14.479,0.01l-146.36,146.524L17.484,3.012
          C13.48-0.992,6.998-0.992,3.004,3.001C-1,6.995-1,13.477,2.994,17.48l146.187,146.361L2.994,310.211
          C-1,314.206-1,320.698,3.004,324.691z"/>
        </svg>
      </button>
    </div>
    <div class='header-nav'>
      <ul class='header-nav__list'>
        <li class='header-nav__item'>
          <a class='header-nav__link ' href='../../index.html'>
            About
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link header-nav__link--active' href='../index.html'>
            Blog
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link ' href='../../projects/featured/index.html'>
            Projects
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link header-nav__link--light' href='mailto:hey@timmyomahony.com'>
            hey@timmyomahony.com
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

    <main class='main'>
      
  <section class='container mt-xs-20 mt-sm-40 mb-xs-120'>
    <div class='row'>
      <div class='col-xs-12 col-md-8 col-md-offset-2'>
        
        
          
            <p class="alert">This post is > 3 years old. Buyer beware</p>
          
        
        

<article class='content-item'>
  <header class='content-item__header'>
    <h1 class='content-item__title'>
      Twitter controlled power switches with a Raspberry Pis
    </h1>
    
      <p class='content-item__subtitle'>
        <time class='content-item__date' datetime='' itemprop='datePublished'>
          May 11, 2016
        </time>&mdash;
      </p>
    
  </header>
  
    <figure class='content-item__image image mb-xs-60' data-component='image'>
      <span class='image__content'>
        
          <img class='image__img lazyload' data-src='../../media/filer_public/2e/8b/2e8b2f3b-09fc-424e-9f4c-15ae7b1064b0/dsc00289.jpg'>
        
      </span>
    </figure>
  
  <div class='content-item__body user-content'>
    <p>A programmable remote power outlet switch is a great way to control a huge number of interactive installations and projects: turn on your garden water sprinklers with an SMS, play a horn when you receive a Tweet, turn on a light when your website goes down, start playing music when you enter the room &#8230; there are endless possibilities.</p>

<p>To give you an idea of the potential, we&#8217;re going to show you how to make a Twitter controlled power switch that activates for 10 seconds when you Tweet a certain hashtag.</p>

<h2>Overview</h2>

<p>To realise these ideas, all you need are a few relatively cheap off-the-shelf parts:</p>

<ul>
<li><strong>Raspberry Pi</strong>: we&#8217;ll use a <a href="https://www.raspberrypi.org/products/model-b-plus/">Raspberry Pi B+</a> to power the application. With this you will need to buy a power supply and a SD card (ideally with the OS - called <em>NOOBS</em> - pre-installed). It&#8217;s worthwhile also getting a case. I&#8217;ve used <a href="http://ie.farnell.com/multicomp/mc-rp002-clr/raspberry-pi-b-pi2-enclosure-clear/dp/2426744?CMP=i-bf9f-00001000">this case</a> in the past, which has enough space to enclose the below PiMote controller board.</li>
<li><strong>PiMote</strong>: for the remote power outlet we&#8217;ll use a <a href="https://energenie4u.co.uk/catalogue/product/ENER002-2PI">PiMote</a>. These are a line of purpose-built devices by <a href="https://energenie4u.co.uk/">Energenie</a> that attach directly to a Raspberry Pi GPIO pins and allow you control the included plug adapter over radio via software. They have a great range of 10m - 30m (which can be extended by soldering on an antenna).</li>
</ul>

<figure class='image mt-xs-40 mb-xs-40' data-component='image'>
  <div class='image__content'>
    <img class='image__img lazyload' data-src='../../media/filer_public/08/cc/08cc7268-0f7b-44a8-8e2f-d966cb81f7d6/dsc00283.jpg' />
  </div>
  <figcaption class='image__outer-caption'>
  <h3 class='image__outer-caption__title'>
    &mdash; The PiMote controller board and remote socket from Energenie
  </h3>
  </figcaption>
</figure>

<figure class='image mt-xs-40 mb-xs-40' data-component='image'>
  <div class='image__content'>
    <img class='image__img lazyload' data-src='../../media/filer_public/2e/8b/2e8b2f3b-09fc-424e-9f4c-15ae7b1064b0/dsc00289.jpg' />
  </div>
  <figcaption class='image__outer-caption'>
  <h3 class='image__outer-caption__title'>
    &mdash; Everything you need to get your remote switch setup
  </h3>
  </figcaption>
</figure>

<p>We&#8217;ll create a Python application on our Raspberry Pi that will run on boot-up of our device. This application will use the <a href="https://dev.twitter.com/streaming/public">public Twitter stream API</a> to listen for Tweets with a particular hashtag. When a Tweet is received, we will use the PiMote to turn on and off the remote power switch for 10 seconds. Easy!</p>

<h2>Installing the PiMote board</h2>

<p>The first thing to do is attach the PiMote controller board to the GPIO pins on the Raspberry Pi. Make sure that you have aligned it correctly. Looking closely, you will be able to see a small &#8216;1&#8217; and &#8216;2&#8217; beside the top-most pins of the PiMote board. These should connect to the &#8216;1&#8217; (3.3v) and &#8216;2&#8217; (5.0v) pins on the RPi. For more information you should read the <a href="https://energenie4u.co.uk/res/pdfs/ENER314 UM.pdf">Energenie manual</a> but the following image should make it clear:</p>

<figure class='image mt-xs-40 mb-xs-40' data-component='image'>
  <div class='image__content'>
    <img class='image__img lazyload' data-src='../../media/filer_public/02/bf/02bfca90-4b51-4d28-8fc1-4a6d207ee319/dsc002642.jpg' />
  </div>
  <figcaption class='image__outer-caption'>
  <h3 class='image__outer-caption__title'>
    &mdash; The PiMote fits neatly onto the RPi's GPIO pins
  </h3>
  </figcaption>
</figure>

<h2>Setting up the Raspberry Pi</h2>

<p>To get the RPi setup, you should first read <a href="https://www.raspberrypi.org/documentation/setup/">the great documentation on their website</a>. We are going to be connecting to our RPi directly over SSH on the local network. There <a href="https://www.raspberrypi.org/documentation/remote-access/">are alternative</a> approaches if you are not able to do this. If you aren&#8217;t comfortable with any of these you can simply connect <a href="https://www.raspberrypi.org/documentation/setup/monitor-connection.md">a monitor, mouse and keyboard and mouse</a> and use the RPi directly.</p>

<p>First, you need to download a copy of the custom Raspberry Pi, Debian-based OS called &#8220;Raspbian&#8221;. You can get it via <a href="https://www.raspberrypi.org/downloads/raspbian/">torrent or direct download on the Raspberry Pi website</a>.</p>

<p>Once you have it downloaded, unzip it:</p>

<div class="codehilite"><pre><span></span><code>unzip ~/Downloads/2016-05-10-raspbian-jessie.zip
</code></pre></div>

<p>then you need <a href="https://www.raspberrypi.org/documentation/installation/installing-images/mac.md">to format the micro SD card with the image</a>. We&#8217;re using OSX so the following approach is specific to that operating system. You can find guides for other OSs via the RPi documentation above.</p>

<div class="notice"><p>Please be aware that the commands you need to run here will differ from what we run. It's important to read the RPi walkthrough above carefully or you could damage a drive on your laptop</p></div>

<p>First find out what disk your SD card has been assigned.</p>

<div class="codehilite"><pre><span></span><code>diskutil list
</code></pre></div>

<p>In our case it&#8217;s disk &#8216;3&#8217; but we will refer to it as disk &#8216;X&#8217; to avoid any copy and paste disasters!</p>

<p>Then you need to write the downloaded <code>.img</code> to the card:</p>

<div class="codehilite"><pre><span></span><code>sudo dd <span class="nv">bs</span><span class="o">=</span>1m <span class="k">if</span><span class="o">=</span>~/Downloads/2016-05-10-raspbian-jessie.img <span class="nv">of</span><span class="o">=</span>/dev/rdiskX
</code></pre></div>

<p>this will take a few minutes and you may not notice any output on the command line while you are waiting. When the command finishes executing, your SD card is ready!</p>

<p>Connect your RPi to the power supply as well as to your network over Ethernet. You will then need to <a href="https://www.raspberrypi.org/documentation/remote-access/ip-address.md">find what IP your RPi has been assigned on the network</a>. Once you have that, simply SSH in:</p>

<div class="codehilite"><pre><span></span><code>ssh pi@192.168.X.X
</code></pre></div>

<p>with the default password <em>raspberry</em></p>

<h2>Creating our Python environment</h2>

<p>We&#8217;re going to write a simple Python application that will listen to the Twitter API stream and communicate with the PiMote board via the GPIO pins to enable and disable the remote power switch. Before we do this, we&#8217;re going to update our system and also install some dependancies:</p>

<div class="codehilite"><pre><span></span><code>sudo apt-get update
sudo apt-get upgrade
sudo apt-get install python-dev
</code></pre></div>

<p>When creating Python applications, it&#8217;s recommended to use <a href="https://virtualenv.pypa.io/en/latest/"><code>virtualenv</code></a> and <a href="http://virtualenvwrapper.readthedocs.io/en/latest/"><code>virtualenvwrapper</code></a> to create isolated Python environments. This means that instead of installing the new libraries into your global Python path, you encapsulate the libraries required for this project within a sealed-off environment. You don&#8217;t have to use this but it makes life much easier.</p>

<p>To install them:</p>

<div class="codehilite"><pre><span></span><code>sudo pip install virtualenv virtualenvwrapper
</code></pre></div>

<p>then add the two following lines to your <code>~/.bashrc</code> file:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">export</span> <span class="nv">WORKON_HOME</span><span class="o">=</span>~/.virtualenvs/
<span class="nb">source</span> /usr/local/bin/virtualenvwrapper.sh
</code></pre></div>

<p>and reload bash:</p>

<div class="codehilite"><pre><span></span><code><span class="nb">source</span> ~/.bashrc
</code></pre></div>

<p>This will place all your new virtual environments in the folder <code>~/.virtualenvs/</code></p>

<p>Now create a new virtual environment for our project:</p>

<div class="codehilite"><pre><span></span><code>mkvirtualenv twitter_switch
cdvirtualenv
</code></pre></div>

<p>and a new directory to hold our application:</p>

<div class="codehilite"><pre><span></span><code>mkdir twitter_switch
</code></pre></div>

<p>lets add it to our virtual environments path so that we can call it from the <code>python</code> interpreter:</p>

<div class="codehilite"><pre><span></span><code><span class="c1"># This command is a feature of virtualenvwrapper which makes it</span>
<span class="c1"># easy to add folders to the path</span>
add2virtualenv twitter_switch
<span class="nb">cd</span> twitter_switch
</code></pre></div>

<p>We also need to install some Python libraries to help us. The easiest way to do that is using a pip requirements file, so create a file called <code>requirements.txt</code>:</p>

<div class="codehilite"><pre><span></span><code>nano requirements.txt
</code></pre></div>

<p>with the following:</p>

<div class="codehilite"><pre><span></span><code><span class="nv">oauthlib</span><span class="o">==</span><span class="m">1</span>.1.1
<span class="nv">requests</span><span class="o">==</span><span class="m">2</span>.10.0
requests-oauthlib<span class="o">==</span><span class="m">0</span>.6.1
<span class="nv">six</span><span class="o">==</span><span class="m">1</span>.10.0
<span class="nv">tweepy</span><span class="o">==</span><span class="m">3</span>.5.0
</code></pre></div>

<p>then run <code>pip</code>:</p>

<div class="codehilite"><pre><span></span><code>pip install -r requirements.txt
</code></pre></div>

<p>Finally, because we are interacting with GPIO pins, we will need to run out applications as root. So we need to install the GPIO python libraries to the <em>root</em> python, not our virtualenv&#8217;s python:</p>

<div class="codehilite"><pre><span></span><code>sudo pip install RPi.GPIO
</code></pre></div>

<p>and then symlink it back from our root python to our virtualenv packages:</p>

<div class="codehilite"><pre><span></span><code>sudo ln -s /usr/lib/python2.7/dist-packages/RPi ~/.virtualenvs/twitter_switch/lib/python2.7/site-packages/
</code></pre></div>

<h2>Creating our remote switch application</h2>

<p>Now that we have a sane environment with all our dependancies installed, let&#8217;s first create a Python module that can interact with our remote power switch.</p>

<p>The PiMote board on the Raspberry Pi can actually control up to 4 of the remote power sockets that come with it from Energenie. Whether you are just using one socket or four, you need to actually configure each socket manually before using them.</p>

<p>With this in mind, our Python module will allow us to do the following:</p>

<ul>
<li>configure up to four sockets to interact with our Raspberry Pi</li>
<li>turn one or all sockets on indefinitely</li>
<li>turn one or all sockets off</li>
<li>turn one or all sockets on for a specified number of seconds</li>
<li>get the status of a single socket</li>
</ul>

<p>Create a new file called <code>switch.py</code> with the following code:</p>

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">RPi.GPIO</span> <span class="k">as</span> <span class="nn">GPIO</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Timer</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module is intended to interface with the Energie Pi-Mote GPIO board</span>
<span class="sd">attached to the Raspberry Pi. It is written as a singleton module.</span>

<span class="sd">Code is based on the following:</span>

<span class="sd">https://github.com/MiniGirlGeek/energenie-demo/blob/master/energenie.py</span>
<span class="sd">https://energenie4u.co.uk/res/pdfs/ENER314%20UM.pdf</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">PIN_D0</span> <span class="o">=</span> <span class="mi">11</span>
<span class="n">PIN_D1</span> <span class="o">=</span> <span class="mi">15</span>
<span class="n">PIN_D2</span> <span class="o">=</span> <span class="mi">16</span>
<span class="n">PIN_D3</span> <span class="o">=</span> <span class="mi">13</span>

<span class="n">PIN_ENABLE_MODULATOR</span> <span class="o">=</span> <span class="mi">22</span>
<span class="n">PIN_MODULATOR_MODE_SELECT</span> <span class="o">=</span> <span class="mi">18</span>

<span class="c1"># Set the pins numbering mode</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setmode</span><span class="p">(</span><span class="n">GPIO</span><span class="o">.</span><span class="n">BOARD</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setwarnings</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Signal bit maps</span>
<span class="c1">#</span>
<span class="c1"># These are the various codes that identify</span>
<span class="c1"># which switch we are trying to talk to and</span>
<span class="c1"># what we want it to do.</span>
<span class="c1">#</span>
<span class="c1"># [Turn all switches on] = 1011</span>
<span class="c1"># [Turn switch 1 on]     = 1111</span>
<span class="c1"># [Turn switch 2 on]     = 1110</span>
<span class="c1"># [Turn switch 3 on]     = 1101</span>
<span class="c1"># [Turn switch 4 on]     = 1100</span>
<span class="n">POWER_ON</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">POWER_OFF</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">SIGNALS_BITMAP</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">POWER_ON</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1011&#39;</span><span class="p">,</span> <span class="s1">&#39;1111&#39;</span><span class="p">,</span> <span class="s1">&#39;1110&#39;</span><span class="p">,</span> <span class="s1">&#39;1101&#39;</span><span class="p">,</span> <span class="s1">&#39;1100&#39;</span><span class="p">],</span>
    <span class="n">POWER_OFF</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;0011&#39;</span><span class="p">,</span> <span class="s1">&#39;0111&#39;</span><span class="p">,</span> <span class="s1">&#39;0110&#39;</span><span class="p">,</span> <span class="s1">&#39;0101&#39;</span><span class="p">,</span> <span class="s1">&#39;0100&#39;</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Tell the GPIO what pins are going to be used as outputs</span>
<span class="c1"># - the pins that are going to the encoder on the Energenie board: d0-d3</span>
<span class="c1"># - the pin used to enable the modulator</span>
<span class="c1"># - the pin used for mode selection on the modulator (OOK/FSK)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">PIN_D0</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">PIN_D1</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">PIN_D2</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">PIN_D3</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">PIN_ENABLE_MODULATOR</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">PIN_MODULATOR_MODE_SELECT</span><span class="p">,</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>

<span class="c1"># Disable the modulator and reset the pins</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">PIN_ENABLE_MODULATOR</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">PIN_MODULATOR_MODE_SELECT</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">PIN_D0</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">PIN_D1</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">PIN_D2</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">PIN_D3</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

<span class="n">timer</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">_set_encoder_pins</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">socket</span><span class="p">):</span>
    <span class="n">bits</span> <span class="o">=</span> <span class="n">SIGNALS_BITMAP</span><span class="p">[</span><span class="n">mode</span><span class="p">][</span><span class="n">socket</span><span class="p">]</span>
    <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">PIN_D3</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">PIN_D2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">PIN_D1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
    <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">PIN_D0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">bits</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>


<span class="k">def</span> <span class="nf">_toggle_modulator</span><span class="p">():</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
    <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">PIN_ENABLE_MODULATOR</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
    <span class="n">GPIO</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">PIN_ENABLE_MODULATOR</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_switch</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">socket</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">timer</span>
    <span class="k">if</span> <span class="n">timer</span><span class="p">:</span>
        <span class="n">timer</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
        <span class="n">timer</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_set_encoder_pins</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">socket</span><span class="p">)</span>
    <span class="n">_toggle_modulator</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="n">socket</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="n">state</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}{}{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">PIN_D3</span><span class="p">),</span><span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">PIN_D2</span><span class="p">),</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">PIN_D1</span><span class="p">),</span> <span class="n">GPIO</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">PIN_D0</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">state</span> <span class="o">==</span> <span class="n">SIGNALS_BITMAP</span><span class="p">[</span><span class="n">POWER_ON</span><span class="p">][</span><span class="n">socket</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">POWER_ON</span>
    <span class="k">if</span> <span class="n">state</span> <span class="o">==</span> <span class="n">SIGNALS_BITMAP</span><span class="p">[</span><span class="n">POWER_OFF</span><span class="p">][</span><span class="n">socket</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">POWER_OFF</span>
    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>


<span class="k">def</span> <span class="nf">on</span><span class="p">(</span><span class="n">socket</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Turn one or all sockets on. &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">seconds</span><span class="p">:</span>
        <span class="k">global</span> <span class="n">timer</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">timer</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">callback</span><span class="p">():</span>
                <span class="n">_switch</span><span class="p">(</span><span class="n">POWER_OFF</span><span class="p">,</span> <span class="n">socket</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">_switch</span><span class="p">(</span><span class="n">POWER_ON</span><span class="p">,</span> <span class="n">socket</span><span class="p">)</span>
            <span class="n">timer</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">(</span><span class="n">seconds</span><span class="p">,</span> <span class="n">callback</span><span class="p">)</span>
            <span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>    
    <span class="k">else</span><span class="p">:</span>
        <span class="n">_switch</span><span class="p">(</span><span class="n">POWER_ON</span><span class="p">,</span> <span class="n">socket</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">off</span><span class="p">(</span><span class="n">socket</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Turn a single socket off. &quot;&quot;&quot;</span>
    <span class="n">_switch</span><span class="p">(</span><span class="n">POWER_OFF</span><span class="p">,</span> <span class="n">socket</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Configure a single socket. &quot;&quot;&quot;</span>
    <span class="n">socket</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">raw_input</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;Configuring A Socket With A Number:</span>

<span class="s2">First plug the socket into the wall and hold the green button for</span>
<span class="s2">5 seconds until it begins flashing.</span>

<span class="s2">Now enter a number between 1 and 4 to associate that socket with that number:&quot;&quot;&quot;</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">socket</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="ow">or</span> <span class="n">socket</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="nb">print</span> <span class="s2">&quot;ERROR: You must enter a number between 1 and 4&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">on</span><span class="p">(</span><span class="n">socket</span><span class="o">=</span><span class="n">socket</span><span class="p">)</span>
</code></pre></div>

<p>As mentioned above, we first need to configure our socket so that we know what number it corresponds to. To do this, we plug the socket in and press-and-hold the green button until the red light starts flashing. With the socket in this mode we can send a signal to it to assign it a number.</p>

<p>To do so, open the python interpreter and assign the socket a number by simply sending out an <code>on</code> command:</p>

<div class="codehilite"><pre><span></span><code>sudo ~/.virtualenvs/twitter_switch/bin/python
&gt; import switch
&gt; switch.on<span class="o">(</span><span class="nv">socket</span><span class="o">=</span><span class="m">1</span><span class="o">)</span>
</code></pre></div>

<p>Now our socket is socket number 1. Now we can play with it</p>

<div class="codehilite"><pre><span></span><code>&gt; switch.off<span class="o">(</span><span class="nv">socket</span><span class="o">=</span><span class="m">1</span><span class="o">)</span>
&gt; switch.on<span class="o">(</span><span class="nv">socket</span><span class="o">=</span><span class="m">1</span>, <span class="nv">seconds</span><span class="o">=</span><span class="m">10</span><span class="o">)</span>
&gt; switch.status<span class="o">(</span><span class="nv">socket</span><span class="o">=</span><span class="m">1</span><span class="o">)</span>
</code></pre></div>

<h2>Creating our Twitter listener</h2>

<p>Now that we can turn our remote switch on and off, let&#8217;s create a module that uses the Twitter API to detect certain hashtags.</p>

<p>The first thing we need to do is set up a Twitter application on the Twitter developer site so that we can gain access to the API. Create a new application on <code>https://apps.twitter.com</code>. After creating your application you will have four keys and tokens you need to insert into the application: consumer key, consumer secret key, access token and access token secret.</p>

<p>Now create the module <code>twitter.py</code>:</p>

<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">logging.handlers</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="kn">import</span> <span class="nn">tweepy</span>

<span class="kn">import</span> <span class="nn">switch</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">A script that listens to the Twitter Stream API via Tweepy and monitors it for</span>
<span class="sd">one or more hashtags.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="n">logFormatter</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> [</span><span class="si">%(levelname)-5.5s</span><span class="s2">] </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">consoleHandler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()</span>
<span class="n">consoleHandler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">logFormatter</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">consoleHandler</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="n">TWITTER_CONSUMER_KEY</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="n">TWITTER_CONSUMER_SECRET</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="n">TWITTER_ACCESS_TOKEN</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="n">TWITTER_ACCESS_SECRET</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

<span class="n">SEARCH_TERMS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#rpi_turnmeon&quot;</span><span class="p">,</span> <span class="p">]</span>


<span class="k">class</span> <span class="nc">TweetListener</span><span class="p">(</span><span class="n">tweepy</span><span class="o">.</span><span class="n">StreamListener</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A tweet listener.</span>

<span class="sd">    This listens to the Twitter public stream API for any instance of the</span>
<span class="sd">    terms I&#39;ve defined in our search_terms.txt file. When it sees one, it</span>
<span class="sd">    runs the associated dispatchers</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">on_connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[Twitter Hashtag Monitor Started] @ </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[Consumer Key] </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">TWITTER_CONSUMER_KEY</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[Consumer Secret] </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">TWITTER_CONSUMER_SECRET</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[Access Token] </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">TWITTER_ACCESS_TOKEN</span><span class="p">))</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[Access Secret] </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">TWITTER_ACCESS_SECRET</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">on_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">raw_data</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw_data</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[Energie] Switching Power Switch: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">])</span>
        <span class="n">switch</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">seconds</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">on_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;[Twitter API] Error (Status </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">status</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">on_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">track</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;[Twitter API] Limit Reached </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">track</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">on_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;[Twitter API] Timeout&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">on_disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notice</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;[Twitter API] Disconnect&quot;</span><span class="p">)</span>
        <span class="k">return</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;[Search Terms] </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">SEARCH_TERMS</span><span class="p">))</span>
        <span class="n">auth</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">OAuthHandler</span><span class="p">(</span><span class="n">TWITTER_CONSUMER_KEY</span><span class="p">,</span>
                                   <span class="n">TWITTER_CONSUMER_SECRET</span><span class="p">)</span>
        <span class="n">auth</span><span class="o">.</span><span class="n">set_access_token</span><span class="p">(</span><span class="n">TWITTER_ACCESS_TOKEN</span><span class="p">,</span> <span class="n">TWITTER_ACCESS_SECRET</span><span class="p">)</span>
        <span class="n">twitterStream</span> <span class="o">=</span> <span class="n">tweepy</span><span class="o">.</span><span class="n">Stream</span><span class="p">(</span><span class="n">auth</span><span class="p">,</span> <span class="n">TweetListener</span><span class="p">())</span>
        <span class="n">twitterStream</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">track</span><span class="o">=</span><span class="n">SEARCH_TERMS</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">KeyboardInterrupt</span><span class="p">,</span> <span class="ne">SystemExit</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Closing Twitter Stream monitor&quot;</span><span class="p">)</span>
</code></pre></div>

<p>now run the module:</p>

<div class="codehilite"><pre><span></span><code>sudo ~/.virtualenvs/twitter_switch/bin/python twitter.py
</code></pre></div>

<p>and you should see the following output:</p>

<pre><code>2016-05-17 13:47:45,124 [INFO ] [Search Terms] ['#rpi_turnmeon']
2016-05-17 13:47:46,175 [INFO ] [Twitter Hashtag Monitor Started] @ 2016-05-17 13:47:46.174649
2016-05-17 13:47:46,178 [INFO ] [Consumer Key] 'XXX'
2016-05-17 13:47:46,182 [INFO ] [Consumer Secret] 'XXX'
2016-05-17 13:47:46,185 [INFO ] [Access Token] 'XXX'
2016-05-17 13:47:46,189 [INFO ] [Access Secret] 'XXX'
</code></pre>

<p>and you&#8217;ll see that we are listening to the hashtag <em>#rpi_turnmeon</em>. If you Tweet this hashtag now, you should see the following:</p>

<pre><code>2016-05-17 13:48:31,877 [INFO ] [Energie] Switching Power Switch: Test #rpi_turnmeon
</code></pre>

<p>and your switch should turn on. Woohoo!</p>

<h2>Make our application load on boot-up</h2>

<p>With everything set up, we now need to have our twitter listener run when we boot the Raspberry Pi. An easy way to do that is to install <a href="http://supervisord.org/"><code>supervisor</code></a>. This is a process control system (written in Python) to allow us to start/stop &amp; manage our applications. To install:</p>

<div class="codehilite"><pre><span></span><code>sudo apt-get install supervisor
</code></pre></div>

<p>Now let&#8217;s make a configuration file for supervisor:</p>

<div class="codehilite"><pre><span></span><code>vim supervisor.conf
</code></pre></div>

<p>with the following:</p>

<div class="codehilite"><pre><span></span><code><span class="o">[</span>program:twitter_switch<span class="o">]</span>
<span class="nv">numprocs</span><span class="o">=</span><span class="m">1</span>
<span class="nv">user</span><span class="o">=</span>root
<span class="nv">autostart</span><span class="o">=</span><span class="nb">true</span>
<span class="nv">autorestart</span><span class="o">=</span><span class="nb">true</span>
<span class="nv">command</span><span class="o">=</span>/home/pi/.virtualenvs/twitter_switch/bin/python /home/pi/.virtualenvs/twitter_switch/twitter_switch/twitter.py
<span class="nv">directory</span><span class="o">=</span>/home/pi/.virtualenvs/twitter_switch/twitter_switch/
<span class="nv">environment</span><span class="o">=</span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;/home/pi/.virtualenvs/twitter_switch/bin&quot;</span>
<span class="nv">stdout_logfile</span><span class="o">=</span>/home/pi/.virtualenvs/twitter_switch/logs/supervisord.twitter_switch.out.log
<span class="nv">stdout_logfile_maxbytes</span><span class="o">=</span>1MB
<span class="nv">stdout_logfile_backups</span><span class="o">=</span><span class="m">2</span>
<span class="nv">stderr_logfile</span><span class="o">=</span>/home/pi/.virtualenvs/twitter_switch/logs/supervisord.twitter_switch.error.log
<span class="nv">stderr_logfile_maxbytes</span><span class="o">=</span>1MB
<span class="nv">stderr_logfile_backups</span><span class="o">=</span><span class="m">2</span>
</code></pre></div>

<p>Now create the associated log files:</p>

<div class="codehilite"><pre><span></span><code>mkdir ~/.virtualenvs/twitter_switch/logs
touch ~/.virtualenvs/twitter_switch/logs/supervisord.twitter_switch.error.log
touch ~/.virtualenvs/twitter_switch/logs/supervisord.twitter_switch.out.log
</code></pre></div>

<p>now symlink it to the supervisor configuration folder:</p>

<div class="codehilite"><pre><span></span><code>sudo ln -s ~/.virtualenvs/twitter_switch/twitter_switch/supervisor.conf /etc/supervisor/conf.d/twitter_switch.conf
</code></pre></div>

<p>now run the control application:</p>

<div class="codehilite"><pre><span></span><code>sudo supervisorctl
&gt; reread
&gt; update
&gt; status
</code></pre></div>

<p>Now you should be able to plug out your RPi and plug it back in. After a minute allowing it boot up you should be able to Tweet and have your power socket turn on for 10 seconds!</p>

  </div>
  <footer class='content-item__footer mt-xs-80'>
    <p class='list-item__tags'>
      
        <a href='../category/hardware/index.html'>Hardware</a> &mdash;
      
      
        
          <a href='../tag/raspberry-pi/index.html'>Raspberry Pi</a>
        
      
    </p>
    
      <p class='list-item__tags'>
        Last edited 4 months, 3 weeks ago
      </p>
        
  </footer>
</article>
      </div>
    </div>
    
      <footer class='row'>   
        <div class='col-xs-12 col-md-8 col-md-offset-2 center-xs mt-xs-80'>
          <a class='button' href='#' data-component='comments'>
            Load Comments
          </a>
          <div id='disqus_thread'></div>
        </div>
      </footer>
    
  </section>

    </main>
    
    

<footer class='footer'>
  <div class='container'>
    <div class='row mb-xs-40 mb-sm-60'>
      <div class='col-xs-12 col-md-5'>
        <h3>Timmy O&#39;Mahony</h3>
        <p><a class='email' href='mailto:hey@timmyomahony.com'>hey@timmyomahony.com</a></p>
        <p>I’m a software developer. I can help you solve 
        a problem, build a product or grow existing project.</p>
      </div>
    </div>

    <div class='row mb-xs-40 mb-ms-80'>
      
      <div class='col-xs-12 col-sm-6 col-md-4 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Menu</h4>
        <div class="row">
          <div class="col-xs-6">
            <ul class='list--reset'>
              <li>
                <a href='../../index.html'>About</a>
              </li>
              <li>
                <a href='../index.html'>Blog</a>
              </li>
              <li>
                <a href='../../projects/featured/index.html'>Projects</a>
              </li>
              <li>
                <span>&mdash;</span>
              </li>
              <li>
                <a href='../../privacy/index.html'>Privacy</a>
              </li>
            </ul>
          </div>
          <div class="col-xs-6">
            <ul class='list--reset'>
              <li>
                <a class="link--dark" href='../../books/index.html'>Books</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class='col-xs-12 col-sm-6 col-md-4 col-md-offset-1 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Contact</h4>
        <ul class='list--reset'>
          <li>
            <a href='mailto:hey@timmyomahony.com'>
              hey@timmyomahony.com
            </a>
            <a class="link--dark" href='../../pgp-key/index.html'>
              (pgp)
            </a>
          </li>
          <li>
            <a href='skype:live:timmyomahony' target='_blank' title='Skype me'>
              Skype
            </a>
          </li>
        </ul>
      </div>
      
      <div class='col-xs-12 col-sm-6 col-md-3 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Online</h4>
        <ul class='list--reset'>
          <li>
            <a href='https://github.com/timmyomahony/' target='_blank' title='Look through my Github profile'>
              Github
            </a>
          </li>
          <li>
            <a href='https://twitter.com/timmyomahony/' target='_blank' title='Look through my Twitter profile'>
              Twitter
            </a>
          </li>
          <li>
            <a href='http://stackoverflow.com/users/396300/timmy-omahony' target='_blank' title='See my Stack Overflow profile'>
              Stack Overflow
            </a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class='row'>
      <div class='col-xs-12'>
        <p class='copyright'>Copyright Timmy O’Mahony 2020 &copy; <a class='link--underline' href='../../about-this-site/index.html'>More information</a>  — <a class='link--dark' href='../../changelog/index.html'>Changelog (v1.5.8)</a></p>
      </div>
    </div>
  </div>
</footer>
    
    
    <div class='elevator' data-component='elevator'>
  <svg version='1.0' viewBox='0 0 32 32' xml:space='preserve' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>
    <polygon points='0.645,10.383 16,23.871 31.355,10.383 29.375,8.129 16,19.878 2.625,8.129 '/>
  </svg>
</div>
    
  </div>
  <script src="../../static/js/vendor.min.js"></script>
  <script src="../../static/js/scripts.min.js"></script>
  

  <!--
    Fathom - simple website analytics - https://github.com/usefathom/fathom
    No personal data is tracked!
  -->
  <script>
    (function(f, a, t, h, o, m){
      a[h]=a[h]||function(){
        (a[h].q=a[h].q||[]).push(arguments)
      };
      o=f.createElement('script'),
      m=f.getElementsByTagName('script')[0];
      o.async=1; o.src=t; o.id='fathom-script';
      m.parentNode.insertBefore(o,m)
    })(document, window, 'http://analytics.timmyomahony.com/tracker.js', 'fathom');
    fathom('set', 'siteId', 'SUOML');
    fathom('trackPageview');
  </script>

  
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Twitter controlled power switches with a Raspberry Pis",
    "description": "excerpt",
    "image": "/media/filer_public/2e/8b/2e8b2f3b-09fc-424e-9f4c-15ae7b1064b0/dsc00289.jpg",
    "url": "timmyomahony.com/blog/twitter-controlled-power-switches-raspberry-pis/",
    "author": {
  "@context": "http://schema.org",
  "@type": "Person",
  "name": "Timmy O&#39;Mahony",
  "url": "http://timmyomahony.com",
  "email": "mailto:hey@timmyomahony.com",
  "gender": "male",
  "image": "http://timmyomahony.com/static/images/timmy-omahony-portrait-small.png",
  "jobTitle": "Software Development",
  "sameAs": [
    "https://github.com/timmyomahony/",
    "http://stackoverflow.com/users/396300/timmy-omahony"
  ]
},
    "datePublished": "2016-05-11",
    "dateModified": "2019-09-13",
  }
  </script>

</body>

<!-- Mirrored from timmyomahony.com/blog/twitter-controlled-power-switches-raspberry-pis/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2020 07:54:10 GMT -->
</html>
