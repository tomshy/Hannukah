

<!DOCTYPE html>
<html>

<!-- Mirrored from timmyomahony.com/blog/static-vs-media-and-root-vs-path-in-django/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2020 07:56:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <meta name='description' content="">
  <meta name='keywords' content=''>  
  <title>Understanding, setting up, accessing and serving media files and static files in Django</title>
  
  

<link rel="apple-touch-icon" sizes="180x180" href="../../static/images/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../static/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../static/images/favicon/favicon-16x16.png">
<link rel="manifest" href="../../static/images/favicon/site.webmanifest">
<link rel="mask-icon" href="../../static/images/favicon/safari-pinned-tab.svg" color="#67d38a">
<meta name="msapplication-TileColor" content="#67d38a">
<meta name="theme-color" content="#67d38a">
  
  <link rel="stylesheet" href="../../static/css/styles.min.css" type="text/css" charset="utf-8">
  
</head>
<body class='' data-component='body'>
  <div class='page'>
    





<div class='header-wrapper ' data-component='header'>
  <div class='container'>
    <div class='row'>
      <div class='col-xs-12'>
        <header class='header'>
          <div class='header-logo'>
            <a class='header-image' href='../../index.html'>
              <img class='header-image__img' src="../../static/images/timmy-omahony-portrait-small.png" alt="Timmy O&#39;Mahony">
            </a>
            <div class="header-text">
              <a class='header-title link--dark link--no-underline' href='../../index.html'>
                Timmy O&#39;Mahony
              </a>
              <p class='header-subtitle color-xs-light-gray'>
                Software Development
              </p>
            </div>
          </div>
          <nav class='header-nav'>
            <ul class='header-nav__list'>
              <li class='header-nav__item'>
                <a class='header-nav__link ' href='../../index.html'>
                  About
                </a>
              </li>
              <li class='header-nav__item'>
                <a class='header-nav__link header-nav__link--active' href='../index.html'>
                  Blog
                </a>
              </li>
              <li class='header-nav__item hide-xs show-sm'>
                <a class='header-nav__link header-nav__link--light' href='mailto:hey@timmyomahony.com'>
                  hey@timmyomahony.com
                </a>
              </li>
            </ul>
          </nav>
          <button class='header-hamburger button--reset clickable' data-header-hamburger>
            <svg class="svg svg--hamburger" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
              viewBox="0 0 298 87.011" enable-background="new 0 0 298 87.011" xml:space="preserve">
              <rect x="0" fill="#282828" width="298" height="21.505"/>
              <rect y="65.506" fill="#282828" width="298" height="21.505"/>
            </svg>
          </button>
        </header>
      </div>
    </div>
  </div>
  <div class='header-overlay' data-nav-overlay>
    <div class='header-overlay__close' data-header-overlay-close>
      <button class='button button--reset'>
        <svg class='clickable' version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 327.688 327.681" enable-background="new 0 0 327.688 327.681"
           xml:space="preserve">
        <path fill="#231F20" d="M3.004,324.691c1.997,1.997,4.618,2.99,7.24,2.99s5.243-1.004,7.25-3.001l146.35-146.523l146.35,146.523
          c1.997,2.008,4.618,3.001,7.25,3.001c2.621,0,5.243-1.004,7.239-2.99c4.004-3.993,4.004-10.476,0.011-14.479l-146.207-146.37
          L324.684,17.48c3.994-4.003,3.994-10.485-0.01-14.479c-4.015-4.004-10.486-4.004-14.479,0.01l-146.36,146.524L17.484,3.012
          C13.48-0.992,6.998-0.992,3.004,3.001C-1,6.995-1,13.477,2.994,17.48l146.187,146.361L2.994,310.211
          C-1,314.206-1,320.698,3.004,324.691z"/>
        </svg>
      </button>
    </div>
    <div class='header-nav'>
      <ul class='header-nav__list'>
        <li class='header-nav__item'>
          <a class='header-nav__link ' href='../../index.html'>
            About
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link header-nav__link--active' href='../index.html'>
            Blog
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link ' href='../../projects/featured/index.html'>
            Projects
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link header-nav__link--light' href='mailto:hey@timmyomahony.com'>
            hey@timmyomahony.com
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

    <main class='main'>
      
  <section class='container mt-xs-20 mt-sm-40 mb-xs-120'>
    <div class='row'>
      <div class='col-xs-12 col-md-8 col-md-offset-2'>
        
        
          
            <p class="alert">This post is > 3 years old. Buyer beware</p>
          
        
        

<article class='content-item'>
  <header class='content-item__header'>
    <h1 class='content-item__title'>
      Understanding, setting up, accessing and serving media files and static files in Django
    </h1>
    
      <p class='content-item__subtitle'>
        <time class='content-item__date' datetime='' itemprop='datePublished'>
          June 11, 2014
        </time>&mdash;
      </p>
    
  </header>
  
  <div class='content-item__body user-content'>
    <p><a href="http://stackoverflow.com/questions/6418072/accessing-media-files-in-django/6418281#6418281">My most popular answer on Stackoverflow</a> is from a question that arose from the confusion between media &amp; static files in Django. As it remains popular and is still receiving upvotes, I thought I would write it up as a full blog post.</p>

<h2>Overview</h2>

<p>When creating a website or web application you will most likely need to serve files; images, downloads, css stylesheets, javascript files etc.</p>

<p>These files can be partitioned into two families:</p>

<ul>
<li>those files used in the development, creation and rendering of the website or app. Things like stylesheets, scripts, fonts etc. In Django, these are our <a href="https://docs.djangoproject.com/en/dev/howto/static-files/">static files</a></li>
<li>those files that are uploaded during the normal usage of the website or application such as images, pdfs, videos etc. In Django, these are our <a href="https://docs.djangoproject.com/en/dev/topics/files/">media files</a></li>
</ul>

<p>Dealing with media files is straightforward in Django. Django simply expects us to tell it where in the file system we want to keep and upload our media files as well as the URL under which we would like access to them when serving our website.</p>

<p>Our <em>static</em> files are a little bit more complicated. We could potentially be using a number of different Django applications from various sources. Each of these Django applications might have their own static files to render any widgets or interfaces they might supply.</p>

<p>We therefore need to be able to collect all of those scattered resources and tell Django to put them in one place so that we can serve them all to the user. This is done using  the built-in <a href="https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/">static files app</a> in <code>django.contrib.staticfiles</code>. You should read through the documentation as it&#8217;s outside the scope of this post, but briefly, Django provides a command to search and collect any static files throughout your project: <code>python manage.py collectstatic</code>. This will gather all of the distributed static files into one single location that can be easily served.</p>

<h2>Setup</h2>

<p>To get our static and media files up and running for our project, there are a number of variables we need to set in our project&#8217;s <code>settings.py</code>:</p>

<ul>
<li><a href="https://docs.djangoproject.com/en/dev/ref/settings/#media-root"><code>MEDIA_ROOT</code></a> this is the <em>absolute</em> path to the folder that will hold our user uploads. For example <code>MEDIA_ROOT = "/User/Timmy/Sites/Pho/root/media/".
</code></li>
<li><a href="https://docs.djangoproject.com/en/dev/ref/settings/#media-url"><code>MEDIA_URL</code></a> this is the <em>relative</em> browser URL to be used when accessing our media files in the browser. For example <code>MEDIA_URL = "media/"
</code></li>
<li><a href="https://docs.djangoproject.com/en/dev/ref/settings/#static-root"><code>STATIC_ROOT</code></a> this is the <em>absolute</em> path to the folder within which we want our static files to be collected by the <code>staticfiles</code> application. For example <code>STATIC_ROOT = "/User/Timmy/Sites/Pho/root/static/"</code></li>
<li><a href="https://docs.djangoproject.com/en/dev/ref/settings/#static-url"><code>STATIC_URL</code></a> like <code>MEDIA_URL</code>, this variable is the <em>relative</em> browser URL to be used when accessing our media files in the browser. For example <code>STATIC_URL = "static/"</code></li>
</ul>

<h3>Tip</h3>

<p>Don&#8217;t manually set the absolute paths for your static and media folders. Instead, you can do the following:</p>

<pre><code>ENV_PATH = os.path.abspath(os.path.dirname(__file__))
MEDIA_ROOT = os.path.join(ENV_PATH, 'media/')
</code></pre>

<p>This will automatically detect the absolute path to the <code>settings.py</code> file and then append <code>media/</code> to it given you a dynamically generated path to your media root.</p>

<h2>Deployment &amp; Serving</h2>

<p>Now that we have told where Django can find our various files as well as the URLs they can be located under, we need to actually serve the files for incoming requests. Generally there are two possible scenarios; a production or development environment.  </p>

<p>When a user requests a static or media file in a <em>production environment</em>, we want our web server (nginx/apache etc.) to deal with the request and return the file instead of passing the request down to the application server (uwsgi/gunicorn etc.). To do this we need to configure our webserver to listen for requests that match our <code>STATIC_URL</code> and <code>MEDIA_URL</code> and return the files immediately from the <code>STATIC_ROOT</code> and <code>MEDIA_ROOT</code> folders. How we go about configuring this is outside the scope of this post, but there is an <a href="http://stackoverflow.com/questions/17391616/serving-static-files-with-nginx-gunicorn-django">example for Nginx on Stackoverflow</a> as well as <a href="http://stackoverflow.com/questions/5682809/django-static-file-hosting-an-apache">Apache</a>.</p>

<p>On the other hand, when working in a <em>development environment</em>, we don&#8217;t want to go through the complications of having to set up and configure a fully fledged web server. Thankfully Django provide a <a href="https://docs.djangoproject.com/en/1.9/intro/tutorial01/#the-development-server">very basic web server application</a> that we can use to server our application during development. We can also server our static and media files through this development server too.  </p>

<h3>Static files in development</h3>

<p>For our static files, it&#8217;s <em>very</em> easy. <a href="https://docs.djangoproject.com/en/1.9/howto/static-files/#serving-static-files-during-development">Since Django 1.9, we don&#8217;t need to do anything extra to serve our <em>static</em> files in development</a>. We just need to make sure the <code>django.contrib.staticfiles</code> app is added to our <code>INSTALLED_APP</code> (which is the case by default). The <code>runserver</code> command will automatically take care of the rest.</p>

<h3>Media files in development</h3>

<p>For our media files, we do need to make a small change to have our user-uploaded files served during development. In your main <code>urls.py</code> you can add the following:</p>

<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.conf.urls.static</span> <span class="kn">import</span> <span class="n">static</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1"># ... the rest of your URLconf goes here ...</span>
<span class="p">]</span>

<span class="k">if</span> <span class="n">settings</span><span class="o">.</span><span class="n">DEBUG</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">urlpatterns</span> <span class="o">+=</span> <span class="n">static</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_URL</span><span class="p">,</span> <span class="n">document_root</span><span class="o">=</span><span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_ROOT</span><span class="p">)</span>
</code></pre></div>

<h2>Conclusion</h2>

<p>So, you now have a basic understanding of the differences between the two. Next, have a read of the more <a href="https://docs.djangoproject.com/en/1.9/howto/static-files/">detailed Django documentation on static files</a> as well as the <a href="https://docs.djangoproject.com/en/1.9/topics/http/file-uploads/">documentation for uploading files to your <code>MEDIA_ROOT</code></a></p>

  </div>
  <footer class='content-item__footer mt-xs-80'>
    <p class='list-item__tags'>
      
        <a href='../category/web-development/index.html'>Web Development</a> &mdash;
      
      
        
          <a href='../tag/django/index.html'>Django</a>
        
      
    </p>
    
      <p class='list-item__tags'>
        Last edited 4 months, 3 weeks ago
      </p>
        
  </footer>
</article>
      </div>
    </div>
    
      <footer class='row'>   
        <div class='col-xs-12 col-md-8 col-md-offset-2 center-xs mt-xs-80'>
          <a class='button' href='#' data-component='comments'>
            Load Comments
          </a>
          <div id='disqus_thread'></div>
        </div>
      </footer>
    
  </section>

    </main>
    
    

<footer class='footer'>
  <div class='container'>
    <div class='row mb-xs-40 mb-sm-60'>
      <div class='col-xs-12 col-md-5'>
        <h3>Timmy O&#39;Mahony</h3>
        <p><a class='email' href='mailto:hey@timmyomahony.com'>hey@timmyomahony.com</a></p>
        <p>I’m a software developer. I can help you solve 
        a problem, build a product or grow existing project.</p>
      </div>
    </div>

    <div class='row mb-xs-40 mb-ms-80'>
      
      <div class='col-xs-12 col-sm-6 col-md-4 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Menu</h4>
        <div class="row">
          <div class="col-xs-6">
            <ul class='list--reset'>
              <li>
                <a href='../../index.html'>About</a>
              </li>
              <li>
                <a href='../index.html'>Blog</a>
              </li>
              <li>
                <a href='../../projects/featured/index.html'>Projects</a>
              </li>
              <li>
                <span>&mdash;</span>
              </li>
              <li>
                <a href='../../privacy/index.html'>Privacy</a>
              </li>
            </ul>
          </div>
          <div class="col-xs-6">
            <ul class='list--reset'>
              <li>
                <a class="link--dark" href='../../books/index.html'>Books</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class='col-xs-12 col-sm-6 col-md-4 col-md-offset-1 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Contact</h4>
        <ul class='list--reset'>
          <li>
            <a href='mailto:hey@timmyomahony.com'>
              hey@timmyomahony.com
            </a>
            <a class="link--dark" href='../../pgp-key/index.html'>
              (pgp)
            </a>
          </li>
          <li>
            <a href='skype:live:timmyomahony' target='_blank' title='Skype me'>
              Skype
            </a>
          </li>
        </ul>
      </div>
      
      <div class='col-xs-12 col-sm-6 col-md-3 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Online</h4>
        <ul class='list--reset'>
          <li>
            <a href='https://github.com/timmyomahony/' target='_blank' title='Look through my Github profile'>
              Github
            </a>
          </li>
          <li>
            <a href='https://twitter.com/timmyomahony/' target='_blank' title='Look through my Twitter profile'>
              Twitter
            </a>
          </li>
          <li>
            <a href='http://stackoverflow.com/users/396300/timmy-omahony' target='_blank' title='See my Stack Overflow profile'>
              Stack Overflow
            </a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class='row'>
      <div class='col-xs-12'>
        <p class='copyright'>Copyright Timmy O’Mahony 2020 &copy; <a class='link--underline' href='../../about-this-site/index.html'>More information</a>  — <a class='link--dark' href='../../changelog/index.html'>Changelog (v1.5.8)</a></p>
      </div>
    </div>
  </div>
</footer>
    
    
    <div class='elevator' data-component='elevator'>
  <svg version='1.0' viewBox='0 0 32 32' xml:space='preserve' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>
    <polygon points='0.645,10.383 16,23.871 31.355,10.383 29.375,8.129 16,19.878 2.625,8.129 '/>
  </svg>
</div>
    
  </div>
  <script src="../../static/js/vendor.min.js"></script>
  <script src="../../static/js/scripts.min.js"></script>
  

  <!--
    Fathom - simple website analytics - https://github.com/usefathom/fathom
    No personal data is tracked!
  -->
  <script>
    (function(f, a, t, h, o, m){
      a[h]=a[h]||function(){
        (a[h].q=a[h].q||[]).push(arguments)
      };
      o=f.createElement('script'),
      m=f.getElementsByTagName('script')[0];
      o.async=1; o.src=t; o.id='fathom-script';
      m.parentNode.insertBefore(o,m)
    })(document, window, 'http://analytics.timmyomahony.com/tracker.js', 'fathom');
    fathom('set', 'siteId', 'SUOML');
    fathom('trackPageview');
  </script>

  
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Understanding, setting up, accessing and serving media files and static files in Django",
    "description": "excerpt",
    
    "url": "timmyomahony.com/blog/static-vs-media-and-root-vs-path-in-django/",
    "author": {
  "@context": "http://schema.org",
  "@type": "Person",
  "name": "Timmy O&#39;Mahony",
  "url": "http://timmyomahony.com",
  "email": "mailto:hey@timmyomahony.com",
  "gender": "male",
  "image": "http://timmyomahony.com/static/images/timmy-omahony-portrait-small.png",
  "jobTitle": "Software Development",
  "sameAs": [
    "https://github.com/timmyomahony/",
    "http://stackoverflow.com/users/396300/timmy-omahony"
  ]
},
    "datePublished": "2014-06-11",
    "dateModified": "2019-09-13",
  }
  </script>

</body>

<!-- Mirrored from timmyomahony.com/blog/static-vs-media-and-root-vs-path-in-django/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2020 07:56:07 GMT -->
</html>
