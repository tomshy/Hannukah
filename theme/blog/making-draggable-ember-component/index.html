

<!DOCTYPE html>
<html>

<!-- Mirrored from timmyomahony.com/blog/making-draggable-ember-component/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2020 07:53:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <meta name='description' content="">
  <meta name='keywords' content=''>  
  <title>Making a draggable Ember component</title>
  
  

<link rel="apple-touch-icon" sizes="180x180" href="../../static/images/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../static/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../static/images/favicon/favicon-16x16.png">
<link rel="manifest" href="../../static/images/favicon/site.webmanifest">
<link rel="mask-icon" href="../../static/images/favicon/safari-pinned-tab.svg" color="#67d38a">
<meta name="msapplication-TileColor" content="#67d38a">
<meta name="theme-color" content="#67d38a">
  
  <link rel="stylesheet" href="../../static/css/styles.min.css" type="text/css" charset="utf-8">
  
</head>
<body class='' data-component='body'>
  <div class='page'>
    





<div class='header-wrapper ' data-component='header'>
  <div class='container'>
    <div class='row'>
      <div class='col-xs-12'>
        <header class='header'>
          <div class='header-logo'>
            <a class='header-image' href='../../index.html'>
              <img class='header-image__img' src="../../static/images/timmy-omahony-portrait-small.png" alt="Timmy O&#39;Mahony">
            </a>
            <div class="header-text">
              <a class='header-title link--dark link--no-underline' href='../../index.html'>
                Timmy O&#39;Mahony
              </a>
              <p class='header-subtitle color-xs-light-gray'>
                Software Development
              </p>
            </div>
          </div>
          <nav class='header-nav'>
            <ul class='header-nav__list'>
              <li class='header-nav__item'>
                <a class='header-nav__link ' href='../../index.html'>
                  About
                </a>
              </li>
              <li class='header-nav__item'>
                <a class='header-nav__link header-nav__link--active' href='../index.html'>
                  Blog
                </a>
              </li>
              <li class='header-nav__item hide-xs show-sm'>
                <a class='header-nav__link header-nav__link--light' href='mailto:hey@timmyomahony.com'>
                  hey@timmyomahony.com
                </a>
              </li>
            </ul>
          </nav>
          <button class='header-hamburger button--reset clickable' data-header-hamburger>
            <svg class="svg svg--hamburger" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
              viewBox="0 0 298 87.011" enable-background="new 0 0 298 87.011" xml:space="preserve">
              <rect x="0" fill="#282828" width="298" height="21.505"/>
              <rect y="65.506" fill="#282828" width="298" height="21.505"/>
            </svg>
          </button>
        </header>
      </div>
    </div>
  </div>
  <div class='header-overlay' data-nav-overlay>
    <div class='header-overlay__close' data-header-overlay-close>
      <button class='button button--reset'>
        <svg class='clickable' version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 327.688 327.681" enable-background="new 0 0 327.688 327.681"
           xml:space="preserve">
        <path fill="#231F20" d="M3.004,324.691c1.997,1.997,4.618,2.99,7.24,2.99s5.243-1.004,7.25-3.001l146.35-146.523l146.35,146.523
          c1.997,2.008,4.618,3.001,7.25,3.001c2.621,0,5.243-1.004,7.239-2.99c4.004-3.993,4.004-10.476,0.011-14.479l-146.207-146.37
          L324.684,17.48c3.994-4.003,3.994-10.485-0.01-14.479c-4.015-4.004-10.486-4.004-14.479,0.01l-146.36,146.524L17.484,3.012
          C13.48-0.992,6.998-0.992,3.004,3.001C-1,6.995-1,13.477,2.994,17.48l146.187,146.361L2.994,310.211
          C-1,314.206-1,320.698,3.004,324.691z"/>
        </svg>
      </button>
    </div>
    <div class='header-nav'>
      <ul class='header-nav__list'>
        <li class='header-nav__item'>
          <a class='header-nav__link ' href='../../index.html'>
            About
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link header-nav__link--active' href='../index.html'>
            Blog
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link ' href='../../projects/featured/index.html'>
            Projects
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link header-nav__link--light' href='mailto:hey@timmyomahony.com'>
            hey@timmyomahony.com
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

    <main class='main'>
      
  <section class='container mt-xs-20 mt-sm-40 mb-xs-120'>
    <div class='row'>
      <div class='col-xs-12 col-md-8 col-md-offset-2'>
        
        
          
            <p class="alert">This post is > 3 years old. Buyer beware</p>
          
        
        

<article class='content-item'>
  <header class='content-item__header'>
    <h1 class='content-item__title'>
      Making a draggable Ember component
    </h1>
    
      <p class='content-item__subtitle'>
        <time class='content-item__date' datetime='' itemprop='datePublished'>
          June 1, 2016
        </time>&mdash;
      </p>
    
  </header>
  
    <figure class='content-item__image image mb-xs-60' data-component='image'>
      <span class='image__content'>
        
          <img class='image__img lazyload' data-src='../../media/filer_public/77/cf/77cfa64b-08f3-4adf-849e-bcd79c059898/photo-1475706398693-8250350bc704.png'>
        
      </span>
    </figure>
  
  <div class='content-item__body user-content'>
    <p class="alert">You can see this in action on <a href="https://ember-twiddle.com/b10980daf90397d82def9881e9e33962" target="_blank">Ember Twiddle</a>, or look at the code on <a href="https://gist.github.com/timmyomahony/b10980daf90397d82def9881e9e33962" target="_blank">Github</a></p>

<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API">HTML5 drag and drop API</a> allows you to add rich interactivity to your applications. It is usually used to allow files to be dropped onto upload forms, removing the need for tedious file picker dialogs. You can also use it to allow users to interactively sort lists of elements or allow the user to manually move elements between columns.</p>

<p>To get a sense how this API works, we&#8217;re going to start small and make a simple Ember component that can be dragged and respositioned on the screen. For example, this is useful if you needed to create a photoshop-esque palette that contains tools the user can drag around the screen.</p>

<figure class='image mt-xs-40 mb-xs-40' data-component='image'>
  <div class='image__content'>
    <img class='image__img lazyload' data-src='../../media/filer_public/37/4b/374bee47-1639-4130-bf51-a82b680bc0b4/drag-and-drop.gif' />
  </div>
</figure>

<p>To make this work, we first need to understand the basics of the drag and drop API. When we are developing a component that uses the drag and drop API, there are 3 parts we need to consider:</p>

<ul>
<li>a <em>source</em> element that is being dragged somewhere</li>
<li>a <em>destination</em> element that the source element is being dropped onto</li>
<li>an approach for these to elements to communicate</li>
</ul>

<p>These concepts are represented in the API by a number of browser <em>events</em>. So to designate the source and destination elements, we need to assign them both a number of event handlers and attributes.</p>

<p>The <em>source</em> element (in our case, the black box) that is being dragged needs to have the attribute <code>draggable=true</code> assigned as well as a <code>dragStart</code> event handler that collects any information that we want to pass to our destination via the communication interface <code>e.dataTransfer.setData(key, value)</code>.</p>

<p>The <em>destination</em> element (in our case, the entire window) that the source will be dropped onto needs to define a <code>drop</code> and <code>dragEnd</code> event handler. The <code>dragEnd</code> event handler will receive the information from our source element via the communicate interface and reposition the source element accordingly.</p>

<p>You can see how this work in the following Ember component:</p>

<div class="codehilite"><pre><span></span><code><span class="cm">/* global document, $ */</span>

<span class="kr">import</span> <span class="nx">Ember</span> <span class="nx">from</span> <span class="s1">&#39;ember&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">Component</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">tagName</span><span class="o">:</span> <span class="s1">&#39;div&#39;</span><span class="p">,</span>
  <span class="nx">classNames</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;drag-box&#39;</span><span class="p">],</span>
  <span class="nx">attributeBindings</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;draggable&#39;</span><span class="p">],</span>
  <span class="nx">draggable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">visible</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="c1">// When out positioning attributes change, update</span>
  <span class="c1">// the underlying CSS for this component</span>
  <span class="nx">positionChanged</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">observer</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">().</span><span class="nx">css</span><span class="p">({</span>
      <span class="nx">left</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">px`</span><span class="p">,</span>
      <span class="nx">top</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">px`</span><span class="p">,</span>
    <span class="p">});</span>
  <span class="p">}),</span>
  <span class="c1">// This event handler is automatically fired on the component&#39;s</span>
  <span class="c1">// element (the black box) when the mouse is pressed down</span>
  <span class="c1">// and first dragged. It collects information on the position</span>
  <span class="c1">// where the component was clicked. This is passed to the</span>
  <span class="c1">// destinations dragend event handler via the communication</span>
  <span class="c1">// interface</span>
  <span class="nx">dragStart</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">().</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">))</span> <span class="o">-</span> <span class="nx">e</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">clientX</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$</span><span class="p">().</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">))</span> <span class="o">-</span> <span class="nx">e</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">clientY</span><span class="p">;</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">setData</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="sb">`</span><span class="si">${</span><span class="nx">x</span><span class="si">}</span><span class="sb">,</span><span class="si">${</span><span class="nx">y</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="c1">// We are  binding the drop and dragend event handlers to the</span>
  <span class="c1">// document element, not the component itself. When the mouse</span>
  <span class="c1">// button is released, the drop event handler is fired on the</span>
  <span class="c1">// document to figure out where the component should be</span>
  <span class="c1">// moved by getting information passed via the communication</span>
  <span class="c1">// interface (which tracks where in our component element</span>
  <span class="c1">// the drag was initiated)</span>
  <span class="nx">windowDrop</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">xy</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">dataTransfer</span><span class="p">.</span><span class="nx">getData</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">setProperties</span><span class="p">({</span>
      <span class="nx">x</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">e</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">xy</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">e</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">xy</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">windowDragOver</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">didRender</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;drop&#39;</span><span class="p">,</span> <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">windowDrop</span><span class="p">,</span> <span class="nx">self</span><span class="p">))</span>
      <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;dragover&#39;</span><span class="p">,</span> <span class="nx">$</span><span class="p">.</span><span class="nx">proxy</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">windowDragOver</span><span class="p">,</span> <span class="nx">self</span><span class="p">));</span>
  <span class="p">},</span>
  <span class="c1">// Remember to unbind the document event handlers</span>
  <span class="nx">didDestroyElement</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;drop&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">off</span><span class="p">(</span><span class="s1">&#39;dragover&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>

<p>Remember, to see this component in action and to get the rest of the relative code, you can check out the <a href="https://ember-twiddle.com/b10980daf90397d82def9881e9e33962” target="_blank">Ember Twiddle</a>, or look at  the <a href="https://gist.github.com/timmyomahony/b10980daf90397d82def9881e9e33962” target="_blank">Gist</a>.</p>

  </div>
  <footer class='content-item__footer mt-xs-80'>
    <p class='list-item__tags'>
      
        <a href='../category/web-development/index.html'>Web Development</a> &mdash;
      
      
        
          <a href='../tag/emberjs/index.html'>Ember.js</a>
        
      
    </p>
    
      <p class='list-item__tags'>
        Last edited 4 months, 3 weeks ago
      </p>
        
  </footer>
</article>
      </div>
    </div>
    
      <footer class='row'>   
        <div class='col-xs-12 col-md-8 col-md-offset-2 center-xs mt-xs-80'>
          <a class='button' href='#' data-component='comments'>
            Load Comments
          </a>
          <div id='disqus_thread'></div>
        </div>
      </footer>
    
  </section>

    </main>
    
    

<footer class='footer'>
  <div class='container'>
    <div class='row mb-xs-40 mb-sm-60'>
      <div class='col-xs-12 col-md-5'>
        <h3>Timmy O&#39;Mahony</h3>
        <p><a class='email' href='mailto:hey@timmyomahony.com'>hey@timmyomahony.com</a></p>
        <p>I’m a software developer. I can help you solve 
        a problem, build a product or grow existing project.</p>
      </div>
    </div>

    <div class='row mb-xs-40 mb-ms-80'>
      
      <div class='col-xs-12 col-sm-6 col-md-4 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Menu</h4>
        <div class="row">
          <div class="col-xs-6">
            <ul class='list--reset'>
              <li>
                <a href='../../index.html'>About</a>
              </li>
              <li>
                <a href='../index.html'>Blog</a>
              </li>
              <li>
                <a href='../../projects/featured/index.html'>Projects</a>
              </li>
              <li>
                <span>&mdash;</span>
              </li>
              <li>
                <a href='../../privacy/index.html'>Privacy</a>
              </li>
            </ul>
          </div>
          <div class="col-xs-6">
            <ul class='list--reset'>
              <li>
                <a class="link--dark" href='../../books/index.html'>Books</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class='col-xs-12 col-sm-6 col-md-4 col-md-offset-1 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Contact</h4>
        <ul class='list--reset'>
          <li>
            <a href='mailto:hey@timmyomahony.com'>
              hey@timmyomahony.com
            </a>
            <a class="link--dark" href='../../pgp-key/index.html'>
              (pgp)
            </a>
          </li>
          <li>
            <a href='skype:live:timmyomahony' target='_blank' title='Skype me'>
              Skype
            </a>
          </li>
        </ul>
      </div>
      
      <div class='col-xs-12 col-sm-6 col-md-3 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Online</h4>
        <ul class='list--reset'>
          <li>
            <a href='https://github.com/timmyomahony/' target='_blank' title='Look through my Github profile'>
              Github
            </a>
          </li>
          <li>
            <a href='https://twitter.com/timmyomahony/' target='_blank' title='Look through my Twitter profile'>
              Twitter
            </a>
          </li>
          <li>
            <a href='http://stackoverflow.com/users/396300/timmy-omahony' target='_blank' title='See my Stack Overflow profile'>
              Stack Overflow
            </a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class='row'>
      <div class='col-xs-12'>
        <p class='copyright'>Copyright Timmy O’Mahony 2020 &copy; <a class='link--underline' href='../../about-this-site/index.html'>More information</a>  — <a class='link--dark' href='../../changelog/index.html'>Changelog (v1.5.8)</a></p>
      </div>
    </div>
  </div>
</footer>
    
    
    <div class='elevator' data-component='elevator'>
  <svg version='1.0' viewBox='0 0 32 32' xml:space='preserve' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>
    <polygon points='0.645,10.383 16,23.871 31.355,10.383 29.375,8.129 16,19.878 2.625,8.129 '/>
  </svg>
</div>
    
  </div>
  <script src="../../static/js/vendor.min.js"></script>
  <script src="../../static/js/scripts.min.js"></script>
  

  <!--
    Fathom - simple website analytics - https://github.com/usefathom/fathom
    No personal data is tracked!
  -->
  <script>
    (function(f, a, t, h, o, m){
      a[h]=a[h]||function(){
        (a[h].q=a[h].q||[]).push(arguments)
      };
      o=f.createElement('script'),
      m=f.getElementsByTagName('script')[0];
      o.async=1; o.src=t; o.id='fathom-script';
      m.parentNode.insertBefore(o,m)
    })(document, window, 'http://analytics.timmyomahony.com/tracker.js', 'fathom');
    fathom('set', 'siteId', 'SUOML');
    fathom('trackPageview');
  </script>

  
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Making a draggable Ember component",
    "description": "excerpt",
    "image": "/media/filer_public/77/cf/77cfa64b-08f3-4adf-849e-bcd79c059898/photo-1475706398693-8250350bc704.png",
    "url": "timmyomahony.com/blog/making-draggable-ember-component/",
    "author": {
  "@context": "http://schema.org",
  "@type": "Person",
  "name": "Timmy O&#39;Mahony",
  "url": "http://timmyomahony.com",
  "email": "mailto:hey@timmyomahony.com",
  "gender": "male",
  "image": "http://timmyomahony.com/static/images/timmy-omahony-portrait-small.png",
  "jobTitle": "Software Development",
  "sameAs": [
    "https://github.com/timmyomahony/",
    "http://stackoverflow.com/users/396300/timmy-omahony"
  ]
},
    "datePublished": "2016-06-01",
    "dateModified": "2019-09-13",
  }
  </script>

</body>

<!-- Mirrored from timmyomahony.com/blog/making-draggable-ember-component/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2020 07:53:48 GMT -->
</html>
