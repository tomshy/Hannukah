

<!DOCTYPE html>
<html>

<!-- Mirrored from timmyomahony.com/blog/MAMP-phpmyadmin-and-big-database-imports-errors-or-timeouts/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2020 07:56:09 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <meta name='description' content="">
  <meta name='keywords' content=''>  
  <title>Importing Big Databases with MAMP &amp; phpMyAdmin on OSX</title>
  
  

<link rel="apple-touch-icon" sizes="180x180" href="../../static/images/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../static/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../static/images/favicon/favicon-16x16.png">
<link rel="manifest" href="../../static/images/favicon/site.webmanifest">
<link rel="mask-icon" href="../../static/images/favicon/safari-pinned-tab.svg" color="#67d38a">
<meta name="msapplication-TileColor" content="#67d38a">
<meta name="theme-color" content="#67d38a">
  
  <link rel="stylesheet" href="../../static/css/styles.min.css" type="text/css" charset="utf-8">
  
</head>
<body class='' data-component='body'>
  <div class='page'>
    





<div class='header-wrapper ' data-component='header'>
  <div class='container'>
    <div class='row'>
      <div class='col-xs-12'>
        <header class='header'>
          <div class='header-logo'>
            <a class='header-image' href='../../index.html'>
              <img class='header-image__img' src="../../static/images/timmy-omahony-portrait-small.png" alt="Timmy O&#39;Mahony">
            </a>
            <div class="header-text">
              <a class='header-title link--dark link--no-underline' href='../../index.html'>
                Timmy O&#39;Mahony
              </a>
              <p class='header-subtitle color-xs-light-gray'>
                Software Development
              </p>
            </div>
          </div>
          <nav class='header-nav'>
            <ul class='header-nav__list'>
              <li class='header-nav__item'>
                <a class='header-nav__link ' href='../../index.html'>
                  About
                </a>
              </li>
              <li class='header-nav__item'>
                <a class='header-nav__link header-nav__link--active' href='../index.html'>
                  Blog
                </a>
              </li>
              <li class='header-nav__item hide-xs show-sm'>
                <a class='header-nav__link header-nav__link--light' href='mailto:hey@timmyomahony.com'>
                  hey@timmyomahony.com
                </a>
              </li>
            </ul>
          </nav>
          <button class='header-hamburger button--reset clickable' data-header-hamburger>
            <svg class="svg svg--hamburger" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
              viewBox="0 0 298 87.011" enable-background="new 0 0 298 87.011" xml:space="preserve">
              <rect x="0" fill="#282828" width="298" height="21.505"/>
              <rect y="65.506" fill="#282828" width="298" height="21.505"/>
            </svg>
          </button>
        </header>
      </div>
    </div>
  </div>
  <div class='header-overlay' data-nav-overlay>
    <div class='header-overlay__close' data-header-overlay-close>
      <button class='button button--reset'>
        <svg class='clickable' version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 327.688 327.681" enable-background="new 0 0 327.688 327.681"
           xml:space="preserve">
        <path fill="#231F20" d="M3.004,324.691c1.997,1.997,4.618,2.99,7.24,2.99s5.243-1.004,7.25-3.001l146.35-146.523l146.35,146.523
          c1.997,2.008,4.618,3.001,7.25,3.001c2.621,0,5.243-1.004,7.239-2.99c4.004-3.993,4.004-10.476,0.011-14.479l-146.207-146.37
          L324.684,17.48c3.994-4.003,3.994-10.485-0.01-14.479c-4.015-4.004-10.486-4.004-14.479,0.01l-146.36,146.524L17.484,3.012
          C13.48-0.992,6.998-0.992,3.004,3.001C-1,6.995-1,13.477,2.994,17.48l146.187,146.361L2.994,310.211
          C-1,314.206-1,320.698,3.004,324.691z"/>
        </svg>
      </button>
    </div>
    <div class='header-nav'>
      <ul class='header-nav__list'>
        <li class='header-nav__item'>
          <a class='header-nav__link ' href='../../index.html'>
            About
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link header-nav__link--active' href='../index.html'>
            Blog
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link ' href='../../projects/featured/index.html'>
            Projects
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link header-nav__link--light' href='mailto:hey@timmyomahony.com'>
            hey@timmyomahony.com
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

    <main class='main'>
      
  <section class='container mt-xs-20 mt-sm-40 mb-xs-120'>
    <div class='row'>
      <div class='col-xs-12 col-md-8 col-md-offset-2'>
        
        
          
            <p class="alert">This post is > 3 years old. Buyer beware</p>
          
        
        

<article class='content-item'>
  <header class='content-item__header'>
    <h1 class='content-item__title'>
      Importing Big Databases with MAMP &amp; phpMyAdmin on OSX
    </h1>
    
      <p class='content-item__subtitle'>
        <time class='content-item__date' datetime='' itemprop='datePublished'>
          June 25, 2014
        </time>&mdash;
      </p>
    
  </header>
  
    <figure class='content-item__image image mb-xs-60' data-component='image'>
      <span class='image__content'>
        
          <img class='image__img lazyload' data-src='../../media/filer_public/39/61/3961758c-8f88-4a81-a35d-e2fc56e6b93f/photo-14754123459481-0ee5f7a27ea1.jpg'>
        
      </span>
    </figure>
  
  <div class='content-item__body user-content'>
    <p>When you are using phpMyadmin on MAMP or MAMP Pro out of the box, you might run into trouble trying to import databases. Usually this happens when you are trying to upload a large SQL file via phpMyAdmin (generally files greater then 32mb).</p>

<p>You&#8217;ll see errors like:</p>

<blockquote>
  <p>&ldquo; You probably tried to upload too large file. Please refer to documentation for ways to workaround this limit. &rdquo;</p>
</blockquote>

<p>or</p>

<blockquote>
  <p>&ldquo;Script timeout passed, if you want to finish import, please resubmit same file and import will resume.&rdquo;</p>
</blockquote>

<p>There are a couple of reasons for this error message:</p>

<ul>
<li>MAMP&#8217;s PHP has a conservative limit to the amount of data you can POST in a request (32Mb).</li>
<li>MAMP&#8217;s PHP has a conservative limit on the size of uploads in general (32Mb).</li>
<li>MAMP&#8217;s PHP has a conservative memory allowance by default (8Mb)</li>
<li>MAMP&#8217;s PHP has a short timeout value for scripts and pages (30 seconds)</li>
</ul>

<h3>The Solution</h3>

<p>To fix this issue, you need to update MAMP&#8217;s <code>php.ini</code> file to increase the above limits. <u>Beware though</u> - how you do this depends on whether you are using regular MAMP or MAMP Pro:</p>

<ul>
<li>MAMP &mdash; you need to manually edit the <code>php.ini</code> with a text editor</li>
<li>MAMP Pro &mdash; you need to edit the <code>php.ini</code> via the in-app &#8220;template&#8221; editor </li>
</ul>

<h3>MAMP</h3>

<p>First you have to find out what version of PHP your MAMP installation is using. You can do this by opening MAMP, going to &#8220;Preferences&#8221; and clicking &#8220;PHP&#8221; along the top. This will indicate your PHP version (mine is 7.3.1).</p>

<p><img src="../../media/filer_public/53/ad/53adfa3b-0e29-4958-b14f-cac74eabcae4/screenshot_2019-03-15_at_214925.png" alt="Image" /></p>

<p>Once you have your version, open Finder, press <code>[Shift][Command][G]</code> and enter <code>/Applications/MAMP/bin/php/php7.3.1/conf/</code>. You will see a <code>php.ini</code> file. Open it in your favourite text editor.</p>

<p><img src="../../media/filer_public/20/af/20af153e-3757-4fe4-bf10-99046da877f3/screenshot_2019-03-15_at_215240.png" alt="Image" /></p>

<h3>MAMP <u>Pro</u></h3>

<p>For MAMP Pro, find the version of PHP you are using by clicking &#8220;Languages &gt; PHP&#8221; in the left-hand sidebar of the main window. You will see (and be able to select) the current PHP &#8220;default version&#8221;. </p>

<p><img src="../../media/filer_public/b0/30/b03027e1-cdbf-4602-ac15-030e4a74778a/screenshot_2019-03-15_at_214829.png" alt="Image" /></p>

<p>Now go to &#8220;File &gt; Edit Template &gt; PHP (php.ini) &gt; 7.3.1&#8221; to edit the configuration. If you don&#8217;t do this, the <code>php.ini</code> will be overwritten with defaults every time you start MAMP Pro. You can see <a href="https://stackoverflow.com/questions/13213141/php-ini-resetting-on-mamp-server-restart/45376353#45376353">more details on this on Stackoverflow</a> (thanks to <a href="https://twitter.com/jamesfacts">James White</a> for this update)</p>

<p><img src="../../media/filer_public/8d/ee/8deebbd0-e55e-4d46-89cd-28c6ef8049c5/screenshot_2019-03-15_at_212306.png" alt="Image" /></p>

<h3>Configuration</h3>

<p>Once you have the <code>php.ini</code> file ready for editing, you are going to change the values of the following variables:</p>

<pre><code>; Maximum size of POST data that PHP will accept.
post_max_size = 256M

; Maximum allowed size for uploaded files.
upload_max_filesize = 256M

; Maximum execution time of each script, in seconds
max_execution_time = 600     

; Maximum amount of time each script may spend parsing request data
max_input_time = 600

; Maximum amount of memory a script may consume (8MB)
memory_limit = 512M      
</code></pre>

<p>It is important to note that for the variables related to size - <code>post_max_size</code>, <code>upload_max_size</code> and <code>memory_limit</code> - you must change the variable to a size larger than that of the <code>.sql</code> file that you are trying to import. My <code>.sql</code> file was 170mb but if you are importing a larger <code>.sql</code> file you need to set the memory-related variables to an appropriately large value.</p>

<p>Now restart MAMP and you should no longer be experiencing the problems.</p>

<hr />

<h2>Troubleshooting</h2>

<p>Here are some extra steps if things still aren&#8217;t working.</p>

<h4>MAMP Not Starting With Yosemite?</h4>

<p>As <a href="https://twitter.com/gavintyte">@gavintyte</a> has kindly pointed out, if you are running Yosemite, you may also have to rename <code>/Applications/MAMP/Library/bin/envvars</code> to <code>/Applications/MAMP/Library/bin/_envvars</code>.</p>

<p><a href="http://stackoverflow.com/a/25538749/396300">This Stackoverflow question &amp; answer</a> has more information about this issue.</p>

<h4>Still Not Working?</h4>

<p><a href="https://twitter.com/gavintyte">@gavintyte</a> pointed out that to be able to import his <code>.sql</code> file, he had to edit <code>/Applications/MAMP/bin/startMysql.sh</code> and add <code>--max_allowed_packet=500M</code> to the end of the command:</p>

<pre><code>/Applications/MAMP/Library/bin/mysqld_safe
    --port=8889
    --socket=/Applications/MAMP/tmp/mysql/mysql.sock
    --pid-file=/Applications/MAMP/tmp/mysql/mysql.pid
    --log-error=/Applications/MAMP/logs/mysql_error_log
    --max_allowed_packet=500M &amp;
</code></pre>

<p>Again where <code>500M</code> is a value larger than your database file. There is some more information about this on <a href="http://stackoverflow.com/questions/8062496/how-to-change-max-allowed-packet-size">Stackoverflow</a></p>

<h4>Still STILL Not Working?</h4>

<p>(Update: this tip should no longer be needed, as specific details for MAMP Pro are now included above)</p>

<p><a href="http://lukekowald.com/">Luke Kowald</a> emailed me to mention that he still couldn&#8217;t get larger uploads working with any of above fixes for MAMP Pro. I haven&#8217;t experienced this but the following answer from Stackoverflow worked for him:</p>

<p><a href="http://stackoverflow.com/a/25533003/396300">Why have editing mamps php.ini no effect</a></p>

<p>It seems that MAMP uses templates <code>php.ini</code> files from <code>/Applications/MAMP PRO/MAMP PRO.app/Contents/Resources/</code> that can overwrite your updated values in <code>/Applications/MAMP/bin/php/phpX.X.XX/conf/php.ini</code></p>

<h4>Still STILL STILL Not Working?</h4>

<p>If things are still not working, you can abandon phpMyAdmin and use the command line. This suggestion comes from <a href="https://twitter.com/eliszus">Eli Szus</a>:</p>

<ul>
<li>Create the database and database user phpMyAdmin as usual.</li>
<li>Connect to mysql by running the following command from the directory where the dump file was stored:</li>
</ul>

<div class="codehilite"><pre><span></span><code>/Applications/MAMP/Library/bin/mysql --host<span class="o">=</span>localhost -uroot -proot<span class="sb">`</span>
</code></pre></div>

<ul>
<li>Run the following from the mysql commandline: (replace &#8220;mydatabase&#8221; with the name of the database you created in step 1 or that was already in your dump and replace &#8220;myfile.sql&#8221; with the name of your file):</li>
</ul>

<div class="codehilite"><pre><span></span><code>mysql&gt; use mydatabase<span class="p">;</span>
mysql&gt; <span class="nb">source</span> myfile.sql<span class="p">;</span>
</code></pre></div>

  </div>
  <footer class='content-item__footer mt-xs-80'>
    <p class='list-item__tags'>
      
        <a href='../category/web-development/index.html'>Web Development</a> &mdash;
      
      
        
          <a href='../tag/php/index.html'>PHP</a>,
        
          <a href='../tag/mysql/index.html'>MYSQL</a>,
        
          <a href='../tag/mamp/index.html'>MAMP</a>
        
      
    </p>
    
      <p class='list-item__tags'>
        Last edited 1 month ago
      </p>
        
  </footer>
</article>
      </div>
    </div>
    
      <footer class='row'>   
        <div class='col-xs-12 col-md-8 col-md-offset-2 center-xs mt-xs-80'>
          <a class='button' href='#' data-component='comments'>
            Load Comments
          </a>
          <div id='disqus_thread'></div>
        </div>
      </footer>
    
  </section>

    </main>
    
    

<footer class='footer'>
  <div class='container'>
    <div class='row mb-xs-40 mb-sm-60'>
      <div class='col-xs-12 col-md-5'>
        <h3>Timmy O&#39;Mahony</h3>
        <p><a class='email' href='mailto:hey@timmyomahony.com'>hey@timmyomahony.com</a></p>
        <p>I’m a software developer. I can help you solve 
        a problem, build a product or grow existing project.</p>
      </div>
    </div>

    <div class='row mb-xs-40 mb-ms-80'>
      
      <div class='col-xs-12 col-sm-6 col-md-4 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Menu</h4>
        <div class="row">
          <div class="col-xs-6">
            <ul class='list--reset'>
              <li>
                <a href='../../index.html'>About</a>
              </li>
              <li>
                <a href='../index.html'>Blog</a>
              </li>
              <li>
                <a href='../../projects/featured/index.html'>Projects</a>
              </li>
              <li>
                <span>&mdash;</span>
              </li>
              <li>
                <a href='../../privacy/index.html'>Privacy</a>
              </li>
            </ul>
          </div>
          <div class="col-xs-6">
            <ul class='list--reset'>
              <li>
                <a class="link--dark" href='../../books/index.html'>Books</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class='col-xs-12 col-sm-6 col-md-4 col-md-offset-1 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Contact</h4>
        <ul class='list--reset'>
          <li>
            <a href='mailto:hey@timmyomahony.com'>
              hey@timmyomahony.com
            </a>
            <a class="link--dark" href='../../pgp-key/index.html'>
              (pgp)
            </a>
          </li>
          <li>
            <a href='skype:live:timmyomahony' target='_blank' title='Skype me'>
              Skype
            </a>
          </li>
        </ul>
      </div>
      
      <div class='col-xs-12 col-sm-6 col-md-3 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Online</h4>
        <ul class='list--reset'>
          <li>
            <a href='https://github.com/timmyomahony/' target='_blank' title='Look through my Github profile'>
              Github
            </a>
          </li>
          <li>
            <a href='https://twitter.com/timmyomahony/' target='_blank' title='Look through my Twitter profile'>
              Twitter
            </a>
          </li>
          <li>
            <a href='http://stackoverflow.com/users/396300/timmy-omahony' target='_blank' title='See my Stack Overflow profile'>
              Stack Overflow
            </a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class='row'>
      <div class='col-xs-12'>
        <p class='copyright'>Copyright Timmy O’Mahony 2020 &copy; <a class='link--underline' href='../../about-this-site/index.html'>More information</a>  — <a class='link--dark' href='../../changelog/index.html'>Changelog (v1.5.8)</a></p>
      </div>
    </div>
  </div>
</footer>
    
    
    <div class='elevator' data-component='elevator'>
  <svg version='1.0' viewBox='0 0 32 32' xml:space='preserve' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>
    <polygon points='0.645,10.383 16,23.871 31.355,10.383 29.375,8.129 16,19.878 2.625,8.129 '/>
  </svg>
</div>
    
  </div>
  <script src="../../static/js/vendor.min.js"></script>
  <script src="../../static/js/scripts.min.js"></script>
  

  <!--
    Fathom - simple website analytics - https://github.com/usefathom/fathom
    No personal data is tracked!
  -->
  <script>
    (function(f, a, t, h, o, m){
      a[h]=a[h]||function(){
        (a[h].q=a[h].q||[]).push(arguments)
      };
      o=f.createElement('script'),
      m=f.getElementsByTagName('script')[0];
      o.async=1; o.src=t; o.id='fathom-script';
      m.parentNode.insertBefore(o,m)
    })(document, window, 'http://analytics.timmyomahony.com/tracker.js', 'fathom');
    fathom('set', 'siteId', 'SUOML');
    fathom('trackPageview');
  </script>

  
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Importing Big Databases with MAMP &amp; phpMyAdmin on OSX",
    "description": "excerpt",
    "image": "/media/filer_public/39/61/3961758c-8f88-4a81-a35d-e2fc56e6b93f/photo-14754123459481-0ee5f7a27ea1.jpg",
    "url": "timmyomahony.com/blog/MAMP-phpmyadmin-and-big-database-imports-errors-or-timeouts/",
    "author": {
  "@context": "http://schema.org",
  "@type": "Person",
  "name": "Timmy O&#39;Mahony",
  "url": "http://timmyomahony.com",
  "email": "mailto:hey@timmyomahony.com",
  "gender": "male",
  "image": "http://timmyomahony.com/static/images/timmy-omahony-portrait-small.png",
  "jobTitle": "Software Development",
  "sameAs": [
    "https://github.com/timmyomahony/",
    "http://stackoverflow.com/users/396300/timmy-omahony"
  ]
},
    "datePublished": "2014-06-25",
    "dateModified": "2019-12-29",
  }
  </script>

</body>

<!-- Mirrored from timmyomahony.com/blog/MAMP-phpmyadmin-and-big-database-imports-errors-or-timeouts/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2020 07:56:14 GMT -->
</html>
