

<!DOCTYPE html>
<html>

<!-- Mirrored from timmyomahony.com/blog/sending-actions-down-components/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2020 07:53:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <meta name='description' content="">
  <meta name='keywords' content=''>  
  <title>Sending Ember actions down to components</title>
  
  

<link rel="apple-touch-icon" sizes="180x180" href="../../static/images/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../static/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../static/images/favicon/favicon-16x16.png">
<link rel="manifest" href="../../static/images/favicon/site.webmanifest">
<link rel="mask-icon" href="../../static/images/favicon/safari-pinned-tab.svg" color="#67d38a">
<meta name="msapplication-TileColor" content="#67d38a">
<meta name="theme-color" content="#67d38a">
  
  <link rel="stylesheet" href="../../static/css/styles.min.css" type="text/css" charset="utf-8">
  
</head>
<body class='' data-component='body'>
  <div class='page'>
    





<div class='header-wrapper ' data-component='header'>
  <div class='container'>
    <div class='row'>
      <div class='col-xs-12'>
        <header class='header'>
          <div class='header-logo'>
            <a class='header-image' href='../../index.html'>
              <img class='header-image__img' src="../../static/images/timmy-omahony-portrait-small.png" alt="Timmy O&#39;Mahony">
            </a>
            <div class="header-text">
              <a class='header-title link--dark link--no-underline' href='../../index.html'>
                Timmy O&#39;Mahony
              </a>
              <p class='header-subtitle color-xs-light-gray'>
                Software Development
              </p>
            </div>
          </div>
          <nav class='header-nav'>
            <ul class='header-nav__list'>
              <li class='header-nav__item'>
                <a class='header-nav__link ' href='../../index.html'>
                  About
                </a>
              </li>
              <li class='header-nav__item'>
                <a class='header-nav__link header-nav__link--active' href='../index.html'>
                  Blog
                </a>
              </li>
              <li class='header-nav__item hide-xs show-sm'>
                <a class='header-nav__link header-nav__link--light' href='mailto:hey@timmyomahony.com'>
                  hey@timmyomahony.com
                </a>
              </li>
            </ul>
          </nav>
          <button class='header-hamburger button--reset clickable' data-header-hamburger>
            <svg class="svg svg--hamburger" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
              viewBox="0 0 298 87.011" enable-background="new 0 0 298 87.011" xml:space="preserve">
              <rect x="0" fill="#282828" width="298" height="21.505"/>
              <rect y="65.506" fill="#282828" width="298" height="21.505"/>
            </svg>
          </button>
        </header>
      </div>
    </div>
  </div>
  <div class='header-overlay' data-nav-overlay>
    <div class='header-overlay__close' data-header-overlay-close>
      <button class='button button--reset'>
        <svg class='clickable' version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 327.688 327.681" enable-background="new 0 0 327.688 327.681"
           xml:space="preserve">
        <path fill="#231F20" d="M3.004,324.691c1.997,1.997,4.618,2.99,7.24,2.99s5.243-1.004,7.25-3.001l146.35-146.523l146.35,146.523
          c1.997,2.008,4.618,3.001,7.25,3.001c2.621,0,5.243-1.004,7.239-2.99c4.004-3.993,4.004-10.476,0.011-14.479l-146.207-146.37
          L324.684,17.48c3.994-4.003,3.994-10.485-0.01-14.479c-4.015-4.004-10.486-4.004-14.479,0.01l-146.36,146.524L17.484,3.012
          C13.48-0.992,6.998-0.992,3.004,3.001C-1,6.995-1,13.477,2.994,17.48l146.187,146.361L2.994,310.211
          C-1,314.206-1,320.698,3.004,324.691z"/>
        </svg>
      </button>
    </div>
    <div class='header-nav'>
      <ul class='header-nav__list'>
        <li class='header-nav__item'>
          <a class='header-nav__link ' href='../../index.html'>
            About
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link header-nav__link--active' href='../index.html'>
            Blog
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link ' href='../../projects/featured/index.html'>
            Projects
          </a>
        </li>
        <li class='header-nav__item'>
          <a class='header-nav__link header-nav__link--light' href='mailto:hey@timmyomahony.com'>
            hey@timmyomahony.com
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

    <main class='main'>
      
  <section class='container mt-xs-20 mt-sm-40 mb-xs-120'>
    <div class='row'>
      <div class='col-xs-12 col-md-8 col-md-offset-2'>
        
        
          
        
        

<article class='content-item'>
  <header class='content-item__header'>
    <h1 class='content-item__title'>
      Sending Ember actions down to components
    </h1>
    
      <p class='content-item__subtitle'>
        <time class='content-item__date' datetime='' itemprop='datePublished'>
          April 6, 2018
        </time>&mdash;
      </p>
    
  </header>
  
    <figure class='content-item__image image mb-xs-60' data-component='image'>
      <span class='image__content'>
        
          <img class='image__img lazyload' data-src='../../media/filer_public/ef/98/ef981ec0-2317-4326-9f70-f19d209084ab/wim-arys-523715-unsplash.jpg'>
        
      </span>
    </figure>
  
  <div class='content-item__body user-content'>
    <p>&#8220;Data down, actions up&#8221; is the mantra that Ember lives by (and for good reason) but there are sometimes occasions when you need to be able to call actions or functions on components in a &#8220;downward&#8221; direction.</p>

<h2>Dashboards</h2>

<p><img src="../../media/filer_public/2d/fa/2dfa314e-954a-48e6-97ea-5b317f438807/screenshot_2019-04-17_at_103010.png" alt="Sketch of dashboard problem" /></p>

<p>Imagine you have a dashboard with a number of graphs. Each graph is a component. Each graph component can export its canvas to a PNG file. What if we want to be able to select a number of these graph components at once and have them all export their canvas as a PNG? This is tricky. We need to be able to monitor which components are selected and call the &#8220;export&#8221; action on each of them. Actions down!</p>

<h2>iFrames</h2>

<p><img src="../../media/filer_public/76/a4/76a452b1-ae79-4d52-859c-147d5be657d0/screenshot_2019-04-17_at_103019.png" alt="Sketch of iframe problem" /></p>

<p>If you have an iFrame component, you might want to send and receive message via that iFrame using the <code>postMessage</code> API. Receiving messages is easy as these get bubbled up to the parent components via actions. But how do we send actions <em>down</em> to our iFrame component so that they can be sent via the <code>postMessage</code> API? Actions down!</p>

<h2>A Demo</h2>

<p>To get an idea of the &#8220;dashboard&#8221; situation, I&#8217;ve put together a demo application that offers similar mocked functionality. You can see the <a href="https://ember-actions-example.timmyomahony.com/">demo running on AWS</a>, and you can look at the <a href="https://github.com/timmyomahony/ember-actions-example">completed code on Github</a></p>

<p><img src="../../media/filer_public/bb/85/bb8522a5-3515-4a32-91a4-b3c1b0d4a9e3/ember-actions-example.gif" alt="Demo animation" /></p>

<h2>The Problem</h2>

<p>So the problem here is twofold:</p>

<ol>
<li>We need to be able to track/register a number of components</li>
<li>We need to be able to call actions on those components in bulk</li>
</ol>

<h2>The Solution</h2>

<p><img src="../../media/filer_public/1b/a6/1ba6c708-8d95-46e8-8994-b2d8e21e26cc/screenshot_2019-04-17_at_104159.png" alt="Sketch of solution" /></p>

<p>To get the functionality we require, we need to create a service that acts as a registry for components that need to be tracked. This service has a <code>register</code> and <code>unregister</code> function. Our components will call these functions when they are rendered and destroyed so that they are always accessible from elsewhere in the application.</p>

<p>Once they are registered, we can then access them from our controller. In the demo application, I&#8217;ve added extra functionality to the service to allow these registered components to be selected and deselected. Our controller can then perform bulk operations on the selected components by calling their underlying actions.</p>

<p>Let&#8217;s look at the most important parts of our new dashboard service:</p>

<div class="codehilite"><pre><span></span><code><span class="kr">import</span> <span class="nx">Service</span> <span class="nx">from</span> <span class="s1">&#39;@ember/service&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">computed</span><span class="p">,</span> <span class="nx">set</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@ember/object&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Service</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">modules</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="c1">// ...</span>
  <span class="nx">register</span><span class="p">(</span><span class="nx">component</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span> <span class="k">this</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">component</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Registering component </span><span class="si">${</span><span class="nx">component</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;elementId&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">addObject</span><span class="p">(</span><span class="nx">component</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`Couldn&#39;t register component </span><span class="si">${</span><span class="nx">component</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;elementId&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb"> to module </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;elementId&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">unregister</span><span class="p">(</span><span class="nx">component</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">component</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Unregistering component </span><span class="si">${</span><span class="nx">component</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;elementId&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">removeObject</span><span class="p">(</span><span class="nx">component</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="sb">`Couldn&#39;t unregister component </span><span class="si">${</span><span class="nx">component</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;elementId&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb"> from module </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;elementId&#39;</span><span class="p">)</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_super</span><span class="p">(...</span><span class="nx">arguments</span><span class="p">);</span>
    <span class="nx">set</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s1">&#39;modules&#39;</span><span class="p">,</span> <span class="p">[]);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>

<p>and an example component that registers and unregisters itself:</p>

<div class="codehilite"><pre><span></span><code><span class="kr">import</span> <span class="nx">Component</span> <span class="nx">from</span> <span class="s1">&#39;@ember/component&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">inject</span> <span class="nx">as</span> <span class="nx">service</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@ember/service&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">computed</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@ember/object&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Component</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">dashboard</span><span class="o">:</span> <span class="nx">service</span><span class="p">(),</span>
  <span class="c1">// ...</span>
  <span class="nx">didInsertElement</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_super</span><span class="p">(...</span><span class="nx">arguments</span><span class="p">);</span>

    <span class="c1">// Register with service</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dashboard</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">willRemoveElement</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_super</span><span class="p">(...</span><span class="nx">arguments</span><span class="p">);</span>

    <span class="c1">// Unregister with service</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">dashboard</span><span class="p">.</span><span class="nx">unregister</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span>
    <span class="kr">export</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// ...</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>

<p>and finally, how these bulk actions are called from our controller:</p>

<div class="codehilite"><pre><span></span><code><span class="kr">import</span> <span class="nx">Controller</span> <span class="nx">from</span> <span class="s1">&#39;@ember/controller&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">inject</span> <span class="nx">as</span> <span class="nx">service</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@ember/service&#39;</span><span class="p">;</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">Controller</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">dashboard</span><span class="o">:</span> <span class="nx">service</span><span class="p">(),</span>
  <span class="nx">actions</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">exportModules</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">dashboard</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">component</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">component</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="s1">&#39;export&#39;</span><span class="p">);</span>
      <span class="p">})</span>
    <span class="p">},</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>

<p>Of course, these snippets are only part of the solution to our demo application. To get a better sense of how it works, you should jump into <a href="https://github.com/timmyomahony/ember-actions-example">the repo and check it out in more detail.</a></p>

  </div>
  <footer class='content-item__footer mt-xs-80'>
    <p class='list-item__tags'>
      
        <a href='../category/web-development/index.html'>Web Development</a> &mdash;
      
      
        
          <a href='../tag/emberjs/index.html'>Ember.js</a>
        
      
    </p>
    
      <p class='list-item__tags'>
        Last edited 1 month ago
      </p>
        
  </footer>
</article>
      </div>
    </div>
    
      <footer class='row'>   
        <div class='col-xs-12 col-md-8 col-md-offset-2 center-xs mt-xs-80'>
          <a class='button' href='#' data-component='comments'>
            Load Comments
          </a>
          <div id='disqus_thread'></div>
        </div>
      </footer>
    
  </section>

    </main>
    
    

<footer class='footer'>
  <div class='container'>
    <div class='row mb-xs-40 mb-sm-60'>
      <div class='col-xs-12 col-md-5'>
        <h3>Timmy O&#39;Mahony</h3>
        <p><a class='email' href='mailto:hey@timmyomahony.com'>hey@timmyomahony.com</a></p>
        <p>I’m a software developer. I can help you solve 
        a problem, build a product or grow existing project.</p>
      </div>
    </div>

    <div class='row mb-xs-40 mb-ms-80'>
      
      <div class='col-xs-12 col-sm-6 col-md-4 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Menu</h4>
        <div class="row">
          <div class="col-xs-6">
            <ul class='list--reset'>
              <li>
                <a href='../../index.html'>About</a>
              </li>
              <li>
                <a href='../index.html'>Blog</a>
              </li>
              <li>
                <a href='../../projects/featured/index.html'>Projects</a>
              </li>
              <li>
                <span>&mdash;</span>
              </li>
              <li>
                <a href='../../privacy/index.html'>Privacy</a>
              </li>
            </ul>
          </div>
          <div class="col-xs-6">
            <ul class='list--reset'>
              <li>
                <a class="link--dark" href='../../books/index.html'>Books</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class='col-xs-12 col-sm-6 col-md-4 col-md-offset-1 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Contact</h4>
        <ul class='list--reset'>
          <li>
            <a href='mailto:hey@timmyomahony.com'>
              hey@timmyomahony.com
            </a>
            <a class="link--dark" href='../../pgp-key/index.html'>
              (pgp)
            </a>
          </li>
          <li>
            <a href='skype:live:timmyomahony' target='_blank' title='Skype me'>
              Skype
            </a>
          </li>
        </ul>
      </div>
      
      <div class='col-xs-12 col-sm-6 col-md-3 mb-xs-40'>
        <h4 class='mb-xs-20 mb-sm-40'>Online</h4>
        <ul class='list--reset'>
          <li>
            <a href='https://github.com/timmyomahony/' target='_blank' title='Look through my Github profile'>
              Github
            </a>
          </li>
          <li>
            <a href='https://twitter.com/timmyomahony/' target='_blank' title='Look through my Twitter profile'>
              Twitter
            </a>
          </li>
          <li>
            <a href='http://stackoverflow.com/users/396300/timmy-omahony' target='_blank' title='See my Stack Overflow profile'>
              Stack Overflow
            </a>
          </li>
        </ul>
      </div>
    </div>
    
    <div class='row'>
      <div class='col-xs-12'>
        <p class='copyright'>Copyright Timmy O’Mahony 2020 &copy; <a class='link--underline' href='../../about-this-site/index.html'>More information</a>  — <a class='link--dark' href='../../changelog/index.html'>Changelog (v1.5.8)</a></p>
      </div>
    </div>
  </div>
</footer>
    
    
    <div class='elevator' data-component='elevator'>
  <svg version='1.0' viewBox='0 0 32 32' xml:space='preserve' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>
    <polygon points='0.645,10.383 16,23.871 31.355,10.383 29.375,8.129 16,19.878 2.625,8.129 '/>
  </svg>
</div>
    
  </div>
  <script src="../../static/js/vendor.min.js"></script>
  <script src="../../static/js/scripts.min.js"></script>
  

  <!--
    Fathom - simple website analytics - https://github.com/usefathom/fathom
    No personal data is tracked!
  -->
  <script>
    (function(f, a, t, h, o, m){
      a[h]=a[h]||function(){
        (a[h].q=a[h].q||[]).push(arguments)
      };
      o=f.createElement('script'),
      m=f.getElementsByTagName('script')[0];
      o.async=1; o.src=t; o.id='fathom-script';
      m.parentNode.insertBefore(o,m)
    })(document, window, 'http://analytics.timmyomahony.com/tracker.js', 'fathom');
    fathom('set', 'siteId', 'SUOML');
    fathom('trackPageview');
  </script>

  
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Sending Ember actions down to components",
    "description": "excerpt",
    "image": "/media/filer_public/ef/98/ef981ec0-2317-4326-9f70-f19d209084ab/wim-arys-523715-unsplash.jpg",
    "url": "timmyomahony.com/blog/sending-actions-down-components/",
    "author": {
  "@context": "http://schema.org",
  "@type": "Person",
  "name": "Timmy O&#39;Mahony",
  "url": "http://timmyomahony.com",
  "email": "mailto:hey@timmyomahony.com",
  "gender": "male",
  "image": "http://timmyomahony.com/static/images/timmy-omahony-portrait-small.png",
  "jobTitle": "Software Development",
  "sameAs": [
    "https://github.com/timmyomahony/",
    "http://stackoverflow.com/users/396300/timmy-omahony"
  ]
},
    "datePublished": "2018-04-06",
    "dateModified": "2019-12-29",
  }
  </script>

</body>

<!-- Mirrored from timmyomahony.com/blog/sending-actions-down-components/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Feb 2020 07:53:42 GMT -->
</html>
